function LDFTableSort(e,a){var r=$(e),t=r.attr("data-sortable");if("True"==t){var l=r.attr("data-field"),d="1";void 0!=r.attr("data-order")&&(d=r.attr("data-order"));var n=[];n[0]=l,n[1]=d;var i=ldfTableFilterDataArray[a];ldfTableOrderArray[a]=n,$.ajax({url:ldfTableLoadCallbackArray[a],dataType:"json",data:{pageNumber:1,orderData:n,filterData:i},type:"GET",traditional:!0,success:function(e){if(0==e.header.status)alert(e.header.message);else{var t=-1*parseInt(d);r.attr("data-order",t),r.siblings().removeClass("sortAsc"),r.siblings().removeClass("sortDesc"),r.siblings().removeClass("active"),r.removeClass("sortAsc"),r.removeClass("sortDesc"),r.addClass(1==t?"sortAsc":"sortDesc"),r.addClass("active"),ldfTableCurPageAttribute[a]="1",LDFTableRenderBody(e,a)}},error:function(e,a,r,t){LDFTableShowError(e,a,r,t)}})}}function LDFTableRenderBody(e,a){if(0==e.header.status)return void LDFTableShowError(e.header.message);var r=e.body.pageCount,t=e.body.rowCount,l=e.body.filters;e=e.body.list,ldfTableTBodyArray[a].empty(),"undefined"!=typeof l&&(ldfTableFilterDataArray[a]=l),ldfTableRowsArray[a]=e,0==$(e).length&&(row="<tr><td colspan='"+$(ldfTableHeaderArray[a]).length+"' style='text-align:center;'>Sem registos</td></tr>",ldfTableTBodyArray[a].append(row)),$.each(e,function(e,r){var t="<tr data-rowid='"+r.rowID+"' style='"+r.style+"'>";$.each(r.rowItems,function(e,r){$.each(ldfTableHeaderArray[a],function(e,a){if(r.itemColumnName==a.headerID&&0!=a.headerVisible){var l=r.itemValue;null==l&&(l=""),1==a.headerEncode,null!=r.itemLink&&""!==r.itemLink&&(l='<a href="'+r.itemLink+'">'+l+"</a>");var d="False";d=0==a.headerMobile?"False":"True";var n="";for(var i in a.headerStyle)a.headerStyle.hasOwnProperty(i)&&(n+=i+":"+a.headerStyle[i]+";");t+="<td data-showMobile='"+d+"' data-column='"+r.itemColumnName+"' data-editable='"+a.headerEditable+"' style='"+n+"'>"+l+"</td>"}})}),1==ldfTableAttributes[a].canEditRow&&(t+="<td><button type='button' class='btn btn-success ldfTableEditRow_"+a+"' value='Editar'><li class='fa fa-edit'></li> Editar</button></td>"),1==ldfTableAttributes[a].canDeleteRow&&(t+="<td><button type='button' class='btn btn-danger ldfTableRemoveRow_"+a+"' value='Remover'><li class='fa fa-remove'></li> Remover</button></td>"),t+="</tr>",ldfTableTBodyArray[a].append(t)}),InitRowInlineButtons(a),LDFTableRenderPages(r,t,a)}function LDFTableFilterTable(e,a){var r=JsonFields(e);$.ajax({url:ldfTableSearchCallbackArray[a],dataType:"JSON",data:{pageNumber:1,orderData:ldfTableOrderArray[a],filterData:r},type:"GET",traditional:!0,success:function(e){0==e.header.status?alert(e.header.message):(ldfTableCurPageAttribute[a]=1,LDFTableRenderBody(e,a))},error:function(e,a,r,t){LDFTableShowError(e,a,r,t)}})}function LDFTableAddItem(e,a){var r=JsonFields(e);$.ajax({url:ldfTableAddCallbackArray[a],dataType:"JSON",data:{pageNumber:ldfTableCurPageAttribute[a],orderData:ldfTableOrderArray[a],filterData:ldfTableFilterDataArray[a],insertData:r},type:"POST",traditional:!0,success:function(e){0==e.header.status?alert(e.header.message):LDFTableRenderBody(e,a)},error:function(e,a,r,t){LDFTableShowError(e,a,r,t)}})}function LDFTableRenderPages(e,a,r){var t=0,l="",d=0;for(ldfTableDivFooterArray[r].empty(),t=0;e>=t;t++)l=t+1==ldfTableCurPageAttribute[r]?"active":"",hidePage="",t+1>5&&(e>=t&&(hidePage="hidden",d+=1),t+1<=ldfTableCurPageAttribute[r]&&(""!=hidePage&&(d-=1),hidePage="")),itemPage="<li class='"+l+" "+hidePage+"'><a href='#' data-page='"+(t+1)+"' data-order='1'>"+(t+1)+"</a></li>",ldfTableDivFooterArray[r].append(itemPage);d>0&&(itemPage="<li><a href='#' data-page='0'>...</a></li>",ldfTableDivFooterArray[r].append(itemPage)),ldfTableDivFooterArray[r].parent().find(".row").remove(),itemPage="<div class='row' style='position: relative;width: 100%;margin-top: -10px;'><span class='rowCount'>Total: "+a+" Registos</span></div>",ldfTableDivFooterArray[r].parent().append(itemPage)}function LDFTableChangePage(e,a){var r=[];if(0==e){var t=$(ldfTableDivFooterArray[a])[0].id,l=0;$("#"+t+" li.hidden").each(function(){10>=l&&($(this).removeClass("hidden"),l++)}),0==$("#"+t+" li.hidden").length&&$("#"+t+" li").find("[data-page='0']").remove()}else{var d=ldfTableTHeaderArray[a].find("th.active");r[0]=d.attr("data-field");var n=d.attr("data-order");"undefined"!=typeof d.attr("data-order")&&(n=-1*n),r[1]=n;var i=ldfTableFilterDataArray[a];$.ajax({url:ldfTableLoadCallbackArray[a],dataType:"json",data:{pageNumber:e,orderData:ldfTableOrderArray[a],filterData:i},type:"GET",traditional:!0,success:function(r){0==r.header.status?alert(r.header.message):(ldfTableCurPageAttribute[a]=e,LDFTableRenderBody(r,a))},error:function(e,a,r,t){LDFTableShowError(e,a,r,t)}})}}function LDFTableResetCounter(e){clearInterval(ldfTableRefreshTimeObject[e])}function LDFTableRestartCounter(e){LDFTableResetCounter(e);var a=ldfTableRefreshTime[e];ldfTableRefreshTimeObject[e]=setInterval(function(){UpdateRefreshHeader(e,a),LDFAutoRefreshTable(e)},a)}function UpdateRefreshHeader(e,a){var r=new Date;r.setSeconds(r.getSeconds()+a/1e3);var t=(r.getHours()<=9?"0":"")+r.getHours(),l=(r.getMinutes()<=9?"0":"")+r.getMinutes(),d=(r.getSeconds()<=9?"0":"")+r.getSeconds();$("#autoRefresh"+e).children("span").html("Próxima atualização "+t+":"+l+":"+d)}function LDFAutoRefreshTable(e){LDFTableRestartCounter(e),$.ajax({url:ldfTableLoadCallbackArray[e],dataType:"json",data:{pageNumber:ldfTableCurPageAttribute[e],orderData:ldfTableOrderArray[e],filterData:ldfTableFilterDataArray[e]},type:"GET",traditional:!0,success:function(a){0==a.header.status?alert(a.header.message):LDFTableRenderBody(a,e)},error:function(e,a,r,t){LDFTableShowError(e,a,r,t)}})}function InitRowInlineButtons(e){$(".ldfTableEditRow_"+e).on("click",function(){var a=$(this),r=$(this).closest("tr");"true"==$(r).attr("data-editing")?SaveRow(e,a,r):EditRow(e,a,r)}),$(".ldfTableRemoveRow_"+e).on("click",function(){var a=$(this).closest("tr");$.ajax({url:ldfTableRemoveCallBackArray[e],dataType:"json",data:{rowID:a.attr("data-rowid")},type:"POST",traditional:!0,success:function(a){1==a?$.ajax({url:ldfTableLoadCallbackArray[e],dataType:"JSON",type:"GET",data:{pageNumber:ldfTableCurPageAttribute[e],orderData:ldfTableOrderArray[e],filterData:ldfTableFilterDataArray[e]},traditional:!0,success:function(a){0==a.header.status?alert(a.header.message):LDFTableRenderBody(a,e)},error:function(e,a,r,t){LDFTableShowError(e,a,r,t)}}):alert("Infelizmente não foi possível alterar o registo pretendido")},error:function(e,a,r,t){LDFTableShowError(e,a,r,t)}})})}function EditRow(e,a,r){$(r).attr("data-editing","true"),$(a).html("<li class='fa fa-save'></li> Gravar"),$(a).parent().append("<button type='button' class='btn btn-warning ldfTableCancelEditRow_"+e+"' value='Cancelar'><li class='fa fa-retweet'></li> Cancelar</button>"),InitRowInlineCancelButton(e);r.attr("data-rowid");$.each(ldfTableHeaderArray[e],function(e,a){1==a.headerEditable&&$.each($(r).children("td"),function(e,r){$(r).attr("data-column")==a.headerID&&($(r).attr("data-curValue",$(r).html()),$(this).html(RenderEditorField(a,$(r).html())),$(".ldfeditable.minimal").iCheck({checkboxClass:"icheckbox_flat-green"}))})})}function SaveRow(e,a,r){var t=new Object,l=new Object;$.each($(r).children("td[data-editable='true']"),function(a,r){$.each(ldfTableHeaderArray[e],function(e,a){if(a.headerID==$(r).attr("data-column")){var d=GetEditorFieldValue(a,r);"undefined"!=typeof d.id?(t[a.headerID]=d.id,l[a.headerID]=d.optionValue):t[a.headerID]=l[a.headerID]=d}})}),$.ajax({url:ldfTableEditCallBackArray[e],dataType:"json",data:{rowID:r.attr("data-rowid"),fields:JSON.stringify(t)},type:"POST",traditional:!0,success:function(t){0==t.header.status?alert(t.header.message):(r.attr("data-editing","false"),$(r).find("button.ldfTableCancelEditRow_"+e).remove(),$(a).html("<li class='fa fa-edit'></li> Editar"),$.each($(r).children("td[data-editable='true']"),function(a,r){$.each(ldfTableHeaderArray[e],function(e,a){a.headerID==$(r).attr("data-column")&&$(r).html(l[a.headerID])})}))},error:function(e,a,r,t){LDFTableShowError(e,a,r,t)}})}function InitRowInlineCancelButton(e){$(".ldfTableCancelEditRow_"+e).on("click",function(){var a=$(this),r=$(this).closest("tr");$.each($(r).children("td[data-editable='true']"),function(e,a){$(a).html($(a).attr("data-curValue")),$(a).attr("data-curValue","")}),a.remove();var t=$(r).find("button.ldfTableEditRow_"+e);$(t).html("<li class='fa fa-edit'></li> Editar"),r.attr("data-editing","false")})}function RenderEditorField(e,a){if(-1!=e.headerType.indexOf("String")||-1!=e.headerType.indexOf("Int"))return"<input type='text' class='form-control' value='"+a+"' />";if(-1!=e.headerType.indexOf("DateTime"))return"<input type='text' class='form-control' value='"+a+"' />";if(-1!=e.headerType.indexOf("SelectList")||-1!=e.headerType.indexOf("Boolean")){var r="";for(var t in e.headerEditContent)if(e.headerEditContent.hasOwnProperty(t)){var l="";a==e.headerEditContent[t]&&(l="selected"),r+="<option value='"+t+"' "+l+">"+e.headerEditContent[t]+"</option>"}return"<select class='form-control'>"+r+"</select>"}}function GetEditorFieldValue(e,a){if(-1!=e.headerType.indexOf("String")||-1!=e.headerType.indexOf("Int"))return $(a).children().val();if(-1!=e.headerType.indexOf("DateTime"))return $(a).children().val();if(-1!=e.headerType.indexOf("SelectList")||-1!=e.headerType.indexOf("Boolean")){var r={id:$(a).children().val(),optionValue:$("option:selected",$(a).children()).text()};return r}}function htmlEscape(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ToJavaScriptDate(e){var a,r,t,l;try{a=/Date\(([^)]+)\)/,r=a.exec(e),t=new Date(parseFloat(r[1])),l=t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()}catch(d){console.log("ldfTable | ToJavaScriptDate"+d.message),l=""}return l}function LDFTableShowError(e,a,r,t){alert("De momento não é possível satisfazer o seu pedido")}function JsonFields(e){var a=e.split("&"),r="";return $.each(a,function(e,t){var l=a[e].split("=");""!=r&&(r+=","),r+="{'fieldName':'"+l[0]+"','fieldValue':'"+l[1]+"'}"}),""!=r&&(r="["+r+"]"),r}function LoadLDFTable(e){$.ajax({url:ldfTableLoadCallbackArray[e],dataType:"JSON",type:"GET",success:function(a){0==a.header.status?alert(a.header.message):LDFTableRenderBody(a,e)},error:function(e,a,r,t){LDFTableShowError(e,a,r,t)}})}if("undefined"==typeof ldfTableRowsArray)var ldfTableRowsArray=new Array;if("undefined"==typeof ldfTableOrderArray)var ldfTableOrderArray=new Array;if("undefined"==typeof ldfTableHeaderArray)var ldfTableHeaderArray=new Array;if("undefined"==typeof ldfTableLoadCallbackArray)var ldfTableLoadCallbackArray=new Array;if("undefined"==typeof ldfTableAddCallbackArray)var ldfTableAddCallbackArray=new Array;if("undefined"==typeof ldfTableSearchCallbackArray)var ldfTableSearchCallbackArray=new Array;if("undefined"==typeof ldfTableRemoveCallBackArray)var ldfTableRemoveCallBackArray=new Array;if("undefined"==typeof ldfTableEditCallBackArray)var ldfTableEditCallBackArray=new Array;if("undefined"==typeof ldfTableTBodyArray)var ldfTableTBodyArray=new Array;if("undefined"==typeof ldfTableDivFooterArray)var ldfTableDivFooterArray=new Array;if("undefined"==typeof ldfTableTHeaderArray)var ldfTableTHeaderArray=new Array;if("undefined"==typeof ldfTableTPageArray)var ldfTableTPageArray=new Array;if("undefined"==typeof ldfTableFilterDataArray)var ldfTableFilterDataArray=new Array;if("undefined"==typeof ldfTableAttributes)var ldfTableAttributes=new Array;if("undefined"==typeof ldfTableCurPageAttribute)var ldfTableCurPageAttribute=new Array;if("undefined"==typeof ldfTableRefreshTime)var ldfTableRefreshTime=new Array;if("undefined"==typeof ldfTableRefreshTimeObject)var ldfTableRefreshTimeObject=new Array;$(".internalFooter").on("click","li > a",function(e){e.preventDefault()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxkZlRhYmxlLmpzIl0sIm5hbWVzIjpbIkxERlRhYmxlU29ydCIsIm9iaiIsImF0dHJpZCIsImN1ck9iamVjdCIsIiQiLCJpc1NvcnRhYmxlIiwiYXR0ciIsImZpZWxkTmFtZSIsIm9yZGVyVmFsdWUiLCJ1bmRlZmluZWQiLCJvcmRlckRhdGEiLCJmaWx0ZXJEYXRhIiwibGRmVGFibGVGaWx0ZXJEYXRhQXJyYXkiLCJsZGZUYWJsZU9yZGVyQXJyYXkiLCJhamF4IiwidXJsIiwibGRmVGFibGVMb2FkQ2FsbGJhY2tBcnJheSIsImRhdGFUeXBlIiwiZGF0YSIsInBhZ2VOdW1iZXIiLCJ0eXBlIiwidHJhZGl0aW9uYWwiLCJzdWNjZXNzIiwicmVzIiwiaGVhZGVyIiwic3RhdHVzIiwiYWxlcnQiLCJtZXNzYWdlIiwidmFsdWUiLCJwYXJzZUludCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImxkZlRhYmxlQ3VyUGFnZUF0dHJpYnV0ZSIsIkxERlRhYmxlUmVuZGVyQm9keSIsImVycm9yIiwiZSIsImpxeGhyIiwic2V0dGluZ3MiLCJleGNlcHRpb24iLCJMREZUYWJsZVNob3dFcnJvciIsInBhZ2VDb3VudCIsImJvZHkiLCJyb3dDb3VudCIsImZpbHRlcnMiLCJsaXN0IiwibGRmVGFibGVUQm9keUFycmF5IiwiZW1wdHkiLCJsZGZUYWJsZVJvd3NBcnJheSIsImxlbmd0aCIsInJvdyIsImxkZlRhYmxlSGVhZGVyQXJyYXkiLCJhcHBlbmQiLCJlYWNoIiwiZGF0YWtleSIsImRhdGFWYWx1ZSIsInJvd0lEIiwic3R5bGUiLCJyb3dJdGVtcyIsInJvd0tleSIsInJvd1ZhbHVlIiwiaGVhZGVyS2V5IiwiaGVhZGVyVmFsdWUiLCJpdGVtQ29sdW1uTmFtZSIsIml0ZW1WYWx1ZSIsIml0ZW1MaW5rIiwiYXR0ck1vYmlsZSIsImMiLCJoYXNPd25Qcm9wZXJ0eSIsImxkZlRhYmxlQXR0cmlidXRlcyIsImNhbkVkaXRSb3ciLCJjYW5EZWxldGVSb3ciLCJJbml0Um93SW5saW5lQnV0dG9ucyIsIkxERlRhYmxlUmVuZGVyUGFnZXMiLCJMREZUYWJsZUZpbHRlclRhYmxlIiwiZmllbGRzIiwiZmllbGRPYmplY3QiLCJKc29uRmllbGRzIiwibGRmVGFibGVTZWFyY2hDYWxsYmFja0FycmF5IiwiTERGVGFibGVBZGRJdGVtIiwiaW5zZXJ0T2JqZWN0IiwibGRmVGFibGVBZGRDYWxsYmFja0FycmF5IiwiaW5zZXJ0RGF0YSIsImkiLCJhY3RpdmVQYWdlIiwibkhpZGVQYWdlcyIsImxkZlRhYmxlRGl2Rm9vdGVyQXJyYXkiLCJoaWRlUGFnZSIsIml0ZW1QYWdlIiwicGFyZW50IiwiZmluZCIsInJlbW92ZSIsIkxERlRhYmxlQ2hhbmdlUGFnZSIsInBhZ2UiLCJvYmpJRCIsImlkIiwiaWR4IiwidGhpcyIsImVsZW0iLCJsZGZUYWJsZVRIZWFkZXJBcnJheSIsImN1cml0ZW0iLCJMREZUYWJsZVJlc2V0Q291bnRlciIsImNsZWFySW50ZXJ2YWwiLCJsZGZUYWJsZVJlZnJlc2hUaW1lT2JqZWN0IiwiTERGVGFibGVSZXN0YXJ0Q291bnRlciIsInRpbWVvdXRDb3VudCIsImxkZlRhYmxlUmVmcmVzaFRpbWUiLCJzZXRJbnRlcnZhbCIsIlVwZGF0ZVJlZnJlc2hIZWFkZXIiLCJMREZBdXRvUmVmcmVzaFRhYmxlIiwidGltZSIsImR0VGltZSIsIkRhdGUiLCJzZXRTZWNvbmRzIiwiZ2V0U2Vjb25kcyIsImhyIiwiZ2V0SG91cnMiLCJtbiIsImdldE1pbnV0ZXMiLCJzYyIsImNoaWxkcmVuIiwiaHRtbCIsIm9uIiwicGFyZW50VFIiLCJjbG9zZXN0IiwiU2F2ZVJvdyIsIkVkaXRSb3ciLCJsZGZUYWJsZVJlbW92ZUNhbGxCYWNrQXJyYXkiLCJJbml0Um93SW5saW5lQ2FuY2VsQnV0dG9uIiwiaGVhZGVyRWRpdGFibGUiLCJ0ZGtleSIsInRkVmFsdWUiLCJoZWFkZXJJRCIsIlJlbmRlckVkaXRvckZpZWxkIiwiaUNoZWNrIiwiY2hlY2tib3hDbGFzcyIsImpzb25PYmplY3QiLCJPYmplY3QiLCJqc29uT2JqZWN0VGV4dCIsImNoYW5nZURhdGEiLCJHZXRFZGl0b3JGaWVsZFZhbHVlIiwib3B0aW9uVmFsdWUiLCJsZGZUYWJsZUVkaXRDYWxsQmFja0FycmF5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRPYmoiLCJjb2xPYmplY3QiLCJoZWFkZXJUeXBlIiwiaW5kZXhPZiIsIml0ZW0iLCJoZWFkZXJFZGl0Q29udGVudCIsInNlbGVjdGVkIiwiZWRpdE9iamVjdCIsInZhbCIsImpzb25BcnIiLCJ0ZXh0IiwiaHRtbEVzY2FwZSIsInN0ciIsIlN0cmluZyIsInJlcGxhY2UiLCJUb0phdmFTY3JpcHREYXRlIiwicGF0dGVybiIsInJlc3VsdHMiLCJkdCIsImV4ZWMiLCJwYXJzZUZsb2F0IiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmllbGRBcnJheSIsInNwbGl0IiwiYXJyIiwiTG9hZExERlRhYmxlIiwiQXJyYXkiLCJsZGZUYWJsZVRQYWdlQXJyYXkiLCJwcmV2ZW50RGVmYXVsdCJdLCJtYXBwaW5ncyI6IkFBMEJBLFFBQVNBLGNBQWFDLEVBQUtDLEdBRXZCLEdBQUlDLEdBQVlDLEVBQUVILEdBQ2RJLEVBQWFGLEVBQVVHLEtBQUssZ0JBR2hDLElBQWtCLFFBQWRELEVBQ0osQ0FDSSxHQUFJRSxHQUFZSixFQUFVRyxLQUFLLGNBQzNCRSxFQUFhLEdBRW1CQyxTQUFoQ04sRUFBVUcsS0FBSyxnQkFDZkUsRUFBYUwsRUFBVUcsS0FBSyxjQUdoQyxJQUFJSSxLQUNKQSxHQUFVLEdBQUtILEVBQ2ZHLEVBQVUsR0FBS0YsQ0FDZixJQUFJRyxHQUFhQyx3QkFBd0JWLEVBQ3pDVyxvQkFBbUJYLEdBQVVRLEVBRTdCTixFQUFFVSxNQUNFQyxJQUFLQywwQkFBMEJkLEdBQy9CZSxTQUFVLE9BQ1ZDLE1BQVFDLFdBQWMsRUFBR1QsVUFBYUEsRUFBV0MsV0FBZUEsR0FDaEVTLEtBQVUsTUFDVkMsYUFBWSxFQUNaQyxRQUFV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QUluSyxvQkFBcUIsR0FBSW1LLE1BQy9FLElBQW1DLG1CQUF6QixxQkFBeUMsR0FBSTdILHFCQUFzQixHQUFJNkgsTUFDakYsSUFBeUMsbUJBQS9CLDJCQUErQyxHQUFJaEssMkJBQTRCLEdBQUlnSyxNQUM3RixJQUF3QyxtQkFBOUIsMEJBQThDLEdBQUkvRiwwQkFBMkIsR0FBSStGLE1BQzNGLElBQTJDLG1CQUFqQyw2QkFBaUQsR0FBSWxHLDZCQUE4QixHQUFJa0csTUFDakcsSUFBMkMsbUJBQWpDLDZCQUFpRCxHQUFJakQsNkJBQThCLEdBQUlpRCxNQUNqRyxJQUF5QyxtQkFBL0IsMkJBQStDLEdBQUlsQywyQkFBNEIsR0FBSWtDLE1BQzdGLElBQWtDLG1CQUF4QixvQkFBd0MsR0FBSWxJLG9CQUFxQixHQUFJa0ksTUFDL0UsSUFBc0MsbUJBQTVCLHdCQUE0QyxHQUFJMUYsd0JBQXlCLEdBQUkwRixNQUN2RixJQUFvQyxtQkFBMUIsc0JBQXlDLEdBQUk3RSxzQkFBdUIsR0FBSTZFLE1BQ2xGLElBQWtDLG1CQUF4QixvQkFBd0MsR0FBSUMsb0JBQXFCLEdBQUlELE1BQy9FLElBQXVDLG1CQUE3Qix5QkFBNkMsR0FBSXBLLHlCQUEwQixHQUFJb0ssTUFDekYsSUFBa0MsbUJBQXhCLG9CQUF3QyxHQUFJM0csb0JBQXFCLEdBQUkyRyxNQUMvRSxJQUF3QyxtQkFBOUIsMEJBQThDLEdBQUkvSSwwQkFBMkIsR0FBSStJLE1BQzNGLElBQW1DLG1CQUF6QixxQkFBeUMsR0FBSXRFLHFCQUFzQixHQUFJc0UsTUFDakYsSUFBeUMsbUJBQS9CLDJCQUErQyxHQUFJekUsMkJBQTRCLEdBQUl5RSxNQXlWN0Y1SyxHQUFFLG1CQUFtQnNILEdBQUcsUUFBUyxTQUFVLFNBQVV0RixHQUNqREEsRUFBRThJIiwiZmlsZSI6ImxkZlRhYmxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImlmICh0eXBlb2YobGRmVGFibGVSb3dzQXJyYXkpID09ICd1bmRlZmluZWQnKSB7ICB2YXIgbGRmVGFibGVSb3dzQXJyYXkgPSBuZXcgQXJyYXkoKTsgfVxyXG5pZiAodHlwZW9mKGxkZlRhYmxlT3JkZXJBcnJheSkgPT0gJ3VuZGVmaW5lZCcpIHsgIHZhciBsZGZUYWJsZU9yZGVyQXJyYXkgPSBuZXcgQXJyYXkoKTsgfVxyXG5pZiAodHlwZW9mKGxkZlRhYmxlSGVhZGVyQXJyYXkpID09ICd1bmRlZmluZWQnKSB7ICB2YXIgbGRmVGFibGVIZWFkZXJBcnJheSA9IG5ldyBBcnJheSgpOyB9IFxyXG5pZiAodHlwZW9mKGxkZlRhYmxlTG9hZENhbGxiYWNrQXJyYXkpID09ICd1bmRlZmluZWQnKSB7ICB2YXIgbGRmVGFibGVMb2FkQ2FsbGJhY2tBcnJheSA9IG5ldyBBcnJheSgpOyB9IFxyXG5pZiAodHlwZW9mKGxkZlRhYmxlQWRkQ2FsbGJhY2tBcnJheSkgPT0gJ3VuZGVmaW5lZCcpIHsgIHZhciBsZGZUYWJsZUFkZENhbGxiYWNrQXJyYXkgPSBuZXcgQXJyYXkoKTsgfSBcclxuaWYgKHR5cGVvZihsZGZUYWJsZVNlYXJjaENhbGxiYWNrQXJyYXkpID09ICd1bmRlZmluZWQnKSB7ICB2YXIgbGRmVGFibGVTZWFyY2hDYWxsYmFja0FycmF5ID0gbmV3IEFycmF5KCk7IH0gXHJcbmlmICh0eXBlb2YobGRmVGFibGVSZW1vdmVDYWxsQmFja0FycmF5KSA9PSAndW5kZWZpbmVkJykgeyAgdmFyIGxkZlRhYmxlUmVtb3ZlQ2FsbEJhY2tBcnJheSA9IG5ldyBBcnJheSgpOyB9IFxyXG5pZiAodHlwZW9mKGxkZlRhYmxlRWRpdENhbGxCYWNrQXJyYXkpID09ICd1bmRlZmluZWQnKSB7ICB2YXIgbGRmVGFibGVFZGl0Q2FsbEJhY2tBcnJheSA9IG5ldyBBcnJheSgpOyB9IFxyXG5pZiAodHlwZW9mKGxkZlRhYmxlVEJvZHlBcnJheSkgPT0gJ3VuZGVmaW5lZCcpIHsgIHZhciBsZGZUYWJsZVRCb2R5QXJyYXkgPSBuZXcgQXJyYXkoKTsgfSBcclxuaWYgKHR5cGVvZihsZGZUYWJsZURpdkZvb3RlckFycmF5KSA9PSAndW5kZWZpbmVkJykgeyAgdmFyIGxkZlRhYmxlRGl2Rm9vdGVyQXJyYXkgPSBuZXcgQXJyYXkoKTsgfSBcclxuaWYgKHR5cGVvZihsZGZUYWJsZVRIZWFkZXJBcnJheSkgPT0gJ3VuZGVmaW5lZCcpIHsgdmFyIGxkZlRhYmxlVEhlYWRlckFycmF5ID0gbmV3IEFycmF5KCk7IH0gXHJcbmlmICh0eXBlb2YobGRmVGFibGVUUGFnZUFycmF5KSA9PSAndW5kZWZpbmVkJykgeyAgdmFyIGxkZlRhYmxlVFBhZ2VBcnJheSA9IG5ldyBBcnJheSgpOyB9IFxyXG5pZiAodHlwZW9mKGxkZlRhYmxlRmlsdGVyRGF0YUFycmF5KSA9PSAndW5kZWZpbmVkJykgeyAgdmFyIGxkZlRhYmxlRmlsdGVyRGF0YUFycmF5ID0gbmV3IEFycmF5KCk7IH0gXHJcbmlmICh0eXBlb2YobGRmVGFibGVBdHRyaWJ1dGVzKSA9PSAndW5kZWZpbmVkJykgeyAgdmFyIGxkZlRhYmxlQXR0cmlidXRlcyA9IG5ldyBBcnJheSgpOyB9IFxyXG5pZiAodHlwZW9mKGxkZlRhYmxlQ3VyUGFnZUF0dHJpYnV0ZSkgPT0gJ3VuZGVmaW5lZCcpIHsgIHZhciBsZGZUYWJsZUN1clBhZ2VBdHRyaWJ1dGUgPSBuZXcgQXJyYXkoKTsgfSBcclxuaWYgKHR5cGVvZihsZGZUYWJsZVJlZnJlc2hUaW1lKSA9PSAndW5kZWZpbmVkJykgeyAgdmFyIGxkZlRhYmxlUmVmcmVzaFRpbWUgPSBuZXcgQXJyYXkoKTsgfSBcclxuaWYgKHR5cGVvZihsZGZUYWJsZVJlZnJlc2hUaW1lT2JqZWN0KSA9PSAndW5kZWZpbmVkJykgeyAgdmFyIGxkZlRhYmxlUmVmcmVzaFRpbWVPYmplY3QgPSBuZXcgQXJyYXkoKTsgfSBcclxuXHJcblxyXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy9cclxuLy9NYWluIE1ldGhvZHNcclxuLy9cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vXHJcblxyXG5mdW5jdGlvbiBMREZUYWJsZVNvcnQob2JqLCBhdHRyaWQpXHJcbntcclxuICAgIHZhciBjdXJPYmplY3QgPSAkKG9iaik7XHJcbiAgICB2YXIgaXNTb3J0YWJsZSA9IGN1ck9iamVjdC5hdHRyKFwiZGF0YS1zb3J0YWJsZVwiKTtcclxuXHJcblxyXG4gICAgaWYgKGlzU29ydGFibGUgPT0gXCJUcnVlXCIpIFxyXG4gICAge1xyXG4gICAgICAgIHZhciBmaWVsZE5hbWUgPSBjdXJPYmplY3QuYXR0cihcImRhdGEtZmllbGRcIik7XHJcbiAgICAgICAgdmFyIG9yZGVyVmFsdWUgPSBcIjFcIjtcclxuXHJcbiAgICAgICAgaWYgKGN1ck9iamVjdC5hdHRyKFwiZGF0YS1vcmRlclwiKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb3JkZXJWYWx1ZSA9IGN1ck9iamVjdC5hdHRyKFwiZGF0YS1vcmRlclwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBvcmRlckRhdGEgPSBbXTtcclxuICAgICAgICBvcmRlckRhdGFbMF0gPSBmaWVsZE5hbWU7XHJcbiAgICAgICAgb3JkZXJEYXRhWzFdID0gb3JkZXJWYWx1ZTtcclxuICAgICAgICB2YXIgZmlsdGVyRGF0YSA9IGxkZlRhYmxlRmlsdGVyRGF0YUFycmF5W2F0dHJpZF07XHJcbiAgICAgICAgbGRmVGFibGVPcmRlckFycmF5W2F0dHJpZF0gPSBvcmRlckRhdGE7XHJcblxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogbGRmVGFibGVMb2FkQ2FsbGJhY2tBcnJheVthdHRyaWRdLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICBkYXRhOiB7ICdwYWdlTnVtYmVyJzogMSwgJ29yZGVyRGF0YSc6IG9yZGVyRGF0YSwgJ2ZpbHRlckRhdGEnIDogZmlsdGVyRGF0YSB9LFxyXG4gICAgICAgICAgICB0eXBlOiAgICAgJ0dFVCcsXHJcbiAgICAgICAgICAgIHRyYWRpdGlvbmFsOnRydWUsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3MgOiBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLmhlYWRlci5zdGF0dXMgPT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICBhbGVydChyZXMuaGVhZGVyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZUludChvcmRlclZhbHVlKSAqIC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ck9iamVjdC5hdHRyKFwiZGF0YS1vcmRlclwiLCB2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGN1ck9iamVjdC5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwic29ydEFzY1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJPYmplY3Quc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcInNvcnREZXNjXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ck9iamVjdC5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjdXJPYmplY3QucmVtb3ZlQ2xhc3MoXCJzb3J0QXNjXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ck9iamVjdC5yZW1vdmVDbGFzcyhcInNvcnREZXNjXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ck9iamVjdC5hZGRDbGFzcyhcInNvcnRBc2NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyT2JqZWN0LmFkZENsYXNzKFwic29ydERlc2NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGN1ck9iamVjdC5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBsZGZUYWJsZUN1clBhZ2VBdHRyaWJ1dGVbYXR0cmlkXSA9IFwiMVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIExERlRhYmxlUmVuZGVyQm9keShyZXMsIGF0dHJpZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LCBcclxuICAgICAgICAgICAgZXJyb3IgOiBmdW5jdGlvbiAoZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIExERlRhYmxlU2hvd0Vycm9yKGUsIGpxeGhyLCBzZXR0aW5ncywgZXhjZXB0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIExERlRhYmxlUmVuZGVyQm9keShkYXRhLCBhdHRyaWQpIHtcclxuICAgIGlmIChkYXRhLmhlYWRlci5zdGF0dXMgPT0gZmFsc2UpXHJcbiAgICB7XHJcbiAgICAgICAgTERGVGFibGVTaG93RXJyb3IoZGF0YS5oZWFkZXIubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBwYWdlQ291bnQgICAgPSBkYXRhLmJvZHkucGFnZUNvdW50O1xyXG4gICAgdmFyIHJvd0NvdW50ICAgICA9IGRhdGEuYm9keS5yb3dDb3VudDtcclxuICAgIHZhciBmaWx0ZXJEYXRhICAgPSBkYXRhLmJvZHkuZmlsdGVycztcclxuICAgIGRhdGEgICAgICAgICAgICAgPSBkYXRhLmJvZHkubGlzdDtcclxuICAgIGxkZlRhYmxlVEJvZHlBcnJheVthdHRyaWRdLmVtcHR5KCk7XHJcblxyXG4gICAgaWYgKHR5cGVvZihmaWx0ZXJEYXRhKSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgbGRmVGFibGVGaWx0ZXJEYXRhQXJyYXlbYXR0cmlkXSA9IGZpbHRlckRhdGE7XHJcbiAgICB9XHJcbiAgICBsZGZUYWJsZVJvd3NBcnJheVthdHRyaWRdICAgICAgID0gZGF0YTtcclxuXHJcbiAgICBpZiAoJChkYXRhKS5sZW5ndGggPT0gMClcclxuICAgIHtcclxuICAgICAgICByb3cgPSBcIjx0cj48dGQgY29sc3Bhbj0nXCIgKyAkKGxkZlRhYmxlSGVhZGVyQXJyYXlbYXR0cmlkXSkubGVuZ3RoICsgXCInIHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjsnPlNlbSByZWdpc3RvczwvdGQ+PC90cj5cIjtcclxuICAgICAgICBsZGZUYWJsZVRCb2R5QXJyYXlbYXR0cmlkXS5hcHBlbmQocm93KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChkYXRha2V5LCBkYXRhVmFsdWUpIHtcclxuICAgICAgICB2YXIgcm93ID0gXCI8dHIgZGF0YS1yb3dpZD0nXCIgKyBkYXRhVmFsdWUucm93SUQgKyBcIicgc3R5bGU9J1wiICsgZGF0YVZhbHVlLnN0eWxlICsgXCInPlwiO1xyXG5cclxuICAgICAgICAkLmVhY2goZGF0YVZhbHVlLnJvd0l0ZW1zLCBmdW5jdGlvbiAocm93S2V5LCByb3dWYWx1ZSkge1xyXG5cclxuICAgICAgICAgICAgJC5lYWNoKGxkZlRhYmxlSGVhZGVyQXJyYXlbYXR0cmlkXSwgZnVuY3Rpb24gKGhlYWRlcktleSwgaGVhZGVyVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyb3dWYWx1ZS5pdGVtQ29sdW1uTmFtZSA9PSBoZWFkZXJWYWx1ZVtcImhlYWRlcklEXCJdICYmIGhlYWRlclZhbHVlW1wiaGVhZGVyVmlzaWJsZVwiXSAhPSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJvd1ZhbHVlLml0ZW1WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlclZhbHVlW1wiaGVhZGVyRW5jb2RlXCJdID09IHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93VmFsdWUuaXRlbUxpbmsgIT0gbnVsbCAmJiByb3dWYWx1ZS5pdGVtTGluayAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFwiPGEgaHJlZj1cXFwiXCIgKyByb3dWYWx1ZS5pdGVtTGluayArIFwiXFxcIj5cIiArIHZhbHVlICsgXCI8L2E+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0ck1vYmlsZSA9IFwiRmFsc2VcIjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyVmFsdWVbXCJoZWFkZXJNb2JpbGVcIl0gPT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyTW9iaWxlID0gXCJGYWxzZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJNb2JpbGUgPSBcIlRydWVcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyBpbiBoZWFkZXJWYWx1ZVtcImhlYWRlclN0eWxlXCJdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlclZhbHVlW1wiaGVhZGVyU3R5bGVcIl0uaGFzT3duUHJvcGVydHkoYykpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSArPSBjICsgXCI6XCIgKyBoZWFkZXJWYWx1ZVtcImhlYWRlclN0eWxlXCJdW2NdICsgXCI7XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICByb3cgKz0gXCI8dGQgZGF0YS1zaG93TW9iaWxlPSdcIiArIGF0dHJNb2JpbGUgKyBcIicgZGF0YS1jb2x1bW49J1wiICsgcm93VmFsdWUuaXRlbUNvbHVtbk5hbWUgKyBcIicgZGF0YS1lZGl0YWJsZT0nXCIgKyBoZWFkZXJWYWx1ZVtcImhlYWRlckVkaXRhYmxlXCJdICsgXCInIHN0eWxlPSdcIiArIHN0eWxlICsgXCInPlwiICsgdmFsdWUgKyBcIjwvdGQ+XCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICB9KTtcclxuICAgICBcclxuICAgICAgICBcclxuICAgICAgICBpZiAobGRmVGFibGVBdHRyaWJ1dGVzW2F0dHJpZF0uY2FuRWRpdFJvdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHJvdyArPSBcIjx0ZD48YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBidG4tc3VjY2VzcyBsZGZUYWJsZUVkaXRSb3dfXCIgKyBhdHRyaWQgKyBcIicgdmFsdWU9J0VkaXRhcic+PGxpIGNsYXNzPSdmYSBmYS1lZGl0Jz48L2xpPiBFZGl0YXI8L2J1dHRvbj48L3RkPlwiOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL3JvdyArPSBcIjx0ZD48aW5wdXQgdHlwZT0nYnV0dG9uJyBjbGFzcz0nbGRmVGFibGVFZGl0Um93X1wiICsgYXR0cmlkICsgXCInIHZhbHVlPSdFZGl0YXInLz48L3RkPlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGxkZlRhYmxlQXR0cmlidXRlc1thdHRyaWRdLmNhbkRlbGV0ZVJvdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHJvdyArPSBcIjx0ZD48YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBidG4tZGFuZ2VyIGxkZlRhYmxlUmVtb3ZlUm93X1wiICsgYXR0cmlkICsgXCInIHZhbHVlPSdSZW1vdmVyJz48bGkgY2xhc3M9J2ZhIGZhLXJlbW92ZSc+PC9saT4gUmVtb3ZlcjwvYnV0dG9uPjwvdGQ+XCI7ICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAvL3JvdyArPSBcIjx0ZD48aW5wdXQgdHlwZT0nYnV0dG9uJyBjbGFzcz0nbGRmVGFibGVSZW1vdmVSb3dfXCIgKyBhdHRyaWQgKyBcIicgdmFsdWU9J1JlbW92ZXInLz48L3RkPlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcm93ICs9IFwiPC90cj5cIjtcclxuXHJcbiAgICAgICAgbGRmVGFibGVUQm9keUFycmF5W2F0dHJpZF0uYXBwZW5kKHJvdyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBJbml0Um93SW5saW5lQnV0dG9ucyhhdHRyaWQpO1xyXG4gICAgTERGVGFibGVSZW5kZXJQYWdlcyhwYWdlQ291bnQsIHJvd0NvdW50LCBhdHRyaWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBMREZUYWJsZUZpbHRlclRhYmxlKGZpZWxkcywgYXR0cmlkKVxyXG57XHJcblxyXG4gICAgdmFyIGZpZWxkT2JqZWN0ID0gSnNvbkZpZWxkcyhmaWVsZHMpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiBsZGZUYWJsZVNlYXJjaENhbGxiYWNrQXJyYXlbYXR0cmlkXSxcclxuICAgICAgICBkYXRhVHlwZTogJ0pTT04nLFxyXG4gICAgICAgIGRhdGE6IHsgJ3BhZ2VOdW1iZXInOiAxLCAnb3JkZXJEYXRhJzogbGRmVGFibGVPcmRlckFycmF5W2F0dHJpZF0sICdmaWx0ZXJEYXRhJyA6IGZpZWxkT2JqZWN0IH0sXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgdHJhZGl0aW9uYWw6IHRydWUsXHJcbiAgICAgICAgc3VjY2VzcyA6IGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgaWYgKHJlcy5oZWFkZXIuc3RhdHVzID09IGZhbHNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgIGFsZXJ0KHJlcy5oZWFkZXIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZGZUYWJsZUN1clBhZ2VBdHRyaWJ1dGVbYXR0cmlkXSA9IDE7XHJcbiAgICAgICAgICAgICAgICBMREZUYWJsZVJlbmRlckJvZHkocmVzLCBhdHRyaWQpOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIFxyXG4gICAgICAgIGVycm9yIDogZnVuY3Rpb24gKGUsIGpxeGhyLCBzZXR0aW5ncywgZXhjZXB0aW9uKSB7XHJcbiAgICAgICAgICAgIExERlRhYmxlU2hvd0Vycm9yKGUsIGpxeGhyLCBzZXR0aW5ncywgZXhjZXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBMREZUYWJsZUFkZEl0ZW0oZmllbGRzLCBhdHRyaWQpXHJcbntcclxuICAgIHZhciBpbnNlcnRPYmplY3QgPSBKc29uRmllbGRzKGZpZWxkcyk7XHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IGxkZlRhYmxlQWRkQ2FsbGJhY2tBcnJheVthdHRyaWRdLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXHJcbiAgICAgICAgZGF0YTogeyAncGFnZU51bWJlcic6IGxkZlRhYmxlQ3VyUGFnZUF0dHJpYnV0ZVthdHRyaWRdLCAnb3JkZXJEYXRhJzogbGRmVGFibGVPcmRlckFycmF5W2F0dHJpZF0sICdmaWx0ZXJEYXRhJyA6IGxkZlRhYmxlRmlsdGVyRGF0YUFycmF5W2F0dHJpZF0sICdpbnNlcnREYXRhJyA6IGluc2VydE9iamVjdCB9LFxyXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICB0cmFkaXRpb25hbDogdHJ1ZSxcclxuICAgICAgICBzdWNjZXNzIDogZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICBpZiAocmVzLmhlYWRlci5zdGF0dXMgPT0gZmFsc2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgYWxlcnQocmVzLmhlYWRlci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIExERlRhYmxlUmVuZGVyQm9keShyZXMsIGF0dHJpZCk7IFxyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfSwgXHJcbiAgICAgICAgZXJyb3IgOiBmdW5jdGlvbiAoZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgTERGVGFibGVTaG93RXJyb3IoZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH0pOyAgICBcclxufVxyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vXHJcbi8vRW5kIE1haW4gTWV0aG9kc1xyXG4vL1xyXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy9cclxuXHJcblxyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vXHJcbi8vUGFnZSBNZXRob2RzXHJcbi8vXHJcbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vL1xyXG5cclxuZnVuY3Rpb24gTERGVGFibGVSZW5kZXJQYWdlcyhwYWdlQ291bnQsIHJvd0NvdW50LCBhdHRyaWQpIHtcclxuICAgIHZhciBpID0gMDtcclxuICAgIHZhciBhY3RpdmVQYWdlID0gXCJcIjtcclxuICAgIHZhciBuSGlkZVBhZ2VzID0gMDtcclxuICAgIGxkZlRhYmxlRGl2Rm9vdGVyQXJyYXlbYXR0cmlkXS5lbXB0eSgpO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPD0gcGFnZUNvdW50OyBpKyspIHtcclxuXHJcbiAgICAgICAgaWYgKChpKzEpID09IGxkZlRhYmxlQ3VyUGFnZUF0dHJpYnV0ZVthdHRyaWRdKVxyXG4gICAgICAgICAgICBhY3RpdmVQYWdlID0gXCJhY3RpdmVcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGFjdGl2ZVBhZ2UgPSBcIlwiO1xyXG5cclxuICAgICAgICBoaWRlUGFnZSA9IFwiXCI7XHJcblxyXG4gICAgICAgIGlmICgoaSsxKT41KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGkgPD0gcGFnZUNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICBoaWRlUGFnZSA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgICAgICBuSGlkZVBhZ2VzICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICgoaSsxKSA8PSBsZGZUYWJsZUN1clBhZ2VBdHRyaWJ1dGVbYXR0cmlkXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhpZGVQYWdlICE9IFwiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgbkhpZGVQYWdlcyAtPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGhpZGVQYWdlID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaXRlbVBhZ2UgPSBcIjxsaSBjbGFzcz0nXCIgKyBhY3RpdmVQYWdlICsgXCIgXCIgKyBoaWRlUGFnZSArIFwiJz48YSBocmVmPScjJyBkYXRhLXBhZ2U9J1wiICsgKGkgKyAxKSArIFwiJyBkYXRhLW9yZGVyPScxJz5cIiArIChpICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgIGxkZlRhYmxlRGl2Rm9vdGVyQXJyYXlbYXR0cmlkXS5hcHBlbmQoaXRlbVBhZ2UpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBpZiAobkhpZGVQYWdlcyA+IDApXHJcbiAgICB7XHJcbiAgICAgICAgaXRlbVBhZ2UgPSBcIjxsaT48YSBocmVmPScjJyBkYXRhLXBhZ2U9JzAnPi4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgIGxkZlRhYmxlRGl2Rm9vdGVyQXJyYXlbYXR0cmlkXS5hcHBlbmQoaXRlbVBhZ2UpOyAgICBcclxuICAgIH1cclxuXHJcbiAgICBsZGZUYWJsZURpdkZvb3RlckFycmF5W2F0dHJpZF0ucGFyZW50KCkuZmluZChcIi5yb3dcIikucmVtb3ZlKCk7XHJcbiAgICBpdGVtUGFnZSA9IFwiPGRpdiBjbGFzcz0ncm93JyBzdHlsZT0ncG9zaXRpb246IHJlbGF0aXZlO3dpZHRoOiAxMDAlO21hcmdpbi10b3A6IC0xMHB4Oyc+PHNwYW4gY2xhc3M9J3Jvd0NvdW50Jz5Ub3RhbDogXCIgKyByb3dDb3VudCArIFwiIFJlZ2lzdG9zPC9zcGFuPjwvZGl2PlwiO1xyXG4gICAgbGRmVGFibGVEaXZGb290ZXJBcnJheVthdHRyaWRdLnBhcmVudCgpLmFwcGVuZChpdGVtUGFnZSk7XHJcblxyXG5cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIExERlRhYmxlQ2hhbmdlUGFnZShwYWdlLCBhdHRyaWQpIHtcclxuICAgIHZhciBvcmRlckRhdGEgPSBbXTtcclxuXHJcbiAgICBpZiAocGFnZSA9PSAwKSB7XHJcblxyXG4gICAgICAgIHZhciBvYmpJRCAgID0gJChsZGZUYWJsZURpdkZvb3RlckFycmF5W2F0dHJpZF0pWzBdLmlkO1xyXG4gICAgICAgIHZhciBpZHggICAgID0gMDtcclxuICAgICAgICAkKFwiI1wiICsgb2JqSUQgKyBcIiBsaS5oaWRkZW5cIikuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKGlkeCA8PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWR4ICsrO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoJChcIiNcIiArIG9iaklEICsgXCIgbGkuaGlkZGVuXCIpLmxlbmd0aCA9PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJChcIiNcIiArIG9iaklEICsgXCIgbGlcIikuZmluZChcIltkYXRhLXBhZ2U9JzAnXVwiKS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGVsZW0gPSBsZGZUYWJsZVRIZWFkZXJBcnJheVthdHRyaWRdLmZpbmQoXCJ0aC5hY3RpdmVcIik7XHJcbiAgICAgICAgb3JkZXJEYXRhWzBdID0gZWxlbS5hdHRyKFwiZGF0YS1maWVsZFwiKTtcclxuICAgICAgICB2YXIgY3VyaXRlbSA9IGVsZW0uYXR0cihcImRhdGEtb3JkZXJcIik7XHJcbiAgICAgICAgaWYgKHR5cGVvZihlbGVtLmF0dHIoXCJkYXRhLW9yZGVyXCIpKSAhPSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY3VyaXRlbSAgPSBjdXJpdGVtICotMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb3JkZXJEYXRhWzFdID0gY3VyaXRlbTtcclxuXHJcbiAgICAgICAgdmFyIGZpbHRlckRhdGEgPSBsZGZUYWJsZUZpbHRlckRhdGFBcnJheVthdHRyaWRdO1xyXG5cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IGxkZlRhYmxlTG9hZENhbGxiYWNrQXJyYXlbYXR0cmlkXSxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgZGF0YTogeyAncGFnZU51bWJlcic6IHBhZ2UsICdvcmRlckRhdGEnOiBsZGZUYWJsZU9yZGVyQXJyYXlbYXR0cmlkXSwgJ2ZpbHRlckRhdGEnIDogZmlsdGVyRGF0YSB9LFxyXG4gICAgICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICAgICAgdHJhZGl0aW9uYWw6dHJ1ZSxcclxuICAgICAgICAgICAgc3VjY2VzcyA6IGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMuaGVhZGVyLnN0YXR1cyA9PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgIGFsZXJ0KHJlcy5oZWFkZXIubWVzc2FnZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZGZUYWJsZUN1clBhZ2VBdHRyaWJ1dGVbYXR0cmlkXSA9IHBhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgTERGVGFibGVSZW5kZXJCb2R5KHJlcywgYXR0cmlkKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0sIFxyXG4gICAgICAgICAgICBlcnJvciA6IGZ1bmN0aW9uIChlLCBqcXhociwgc2V0dGluZ3MsIGV4Y2VwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgTERGVGFibGVTaG93RXJyb3IoZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuJChcIi5pbnRlcm5hbEZvb3RlclwiKS5vbihcImNsaWNrXCIsIFwibGkgPiBhXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbn0pO1xyXG5cclxuXHJcbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vL1xyXG4vL0VuZCBQYWdlIE1ldGhvZHNcclxuLy9cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vXHJcblxyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vXHJcbi8vQXV0byBSZWZyZXNoXHJcbi8vXHJcbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vL1xyXG5cclxuZnVuY3Rpb24gTERGVGFibGVSZXNldENvdW50ZXIoYXR0cmlkKVxyXG57XHJcbiAgICBjbGVhckludGVydmFsKGxkZlRhYmxlUmVmcmVzaFRpbWVPYmplY3RbYXR0cmlkXSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIExERlRhYmxlUmVzdGFydENvdW50ZXIoYXR0cmlkKVxyXG57XHJcbiAgICBMREZUYWJsZVJlc2V0Q291bnRlcihhdHRyaWQpO1xyXG4gICAgdmFyIHRpbWVvdXRDb3VudCA9IGxkZlRhYmxlUmVmcmVzaFRpbWVbYXR0cmlkXTtcclxuICAgIGxkZlRhYmxlUmVmcmVzaFRpbWVPYmplY3RbYXR0cmlkXSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgXHJcbiAgICAgICAgVXBkYXRlUmVmcmVzaEhlYWRlcihhdHRyaWQsIHRpbWVvdXRDb3VudCk7IFxyXG4gICAgICAgIFxyXG4gICAgICAgIExERkF1dG9SZWZyZXNoVGFibGUoYXR0cmlkKTtcclxuICAgIH0sIHRpbWVvdXRDb3VudCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBVcGRhdGVSZWZyZXNoSGVhZGVyKGF0dHJpZCwgdGltZSlcclxue1xyXG4gICAgdmFyIGR0VGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBkdFRpbWUuc2V0U2Vjb25kcyhkdFRpbWUuZ2V0U2Vjb25kcygpICsgKHRpbWUvMTAwMCkpO1xyXG4gICAgdmFyIGhyID0gKGR0VGltZS5nZXRIb3VycygpIDw9IDkgPyBcIjBcIiA6IFwiXCIpICsgZHRUaW1lLmdldEhvdXJzKCk7XHJcbiAgICB2YXIgbW4gPSAoZHRUaW1lLmdldE1pbnV0ZXMoKSA8PSA5ID8gXCIwXCIgOiBcIlwiKSArIGR0VGltZS5nZXRNaW51dGVzKCk7XHJcbiAgICB2YXIgc2MgPSAoZHRUaW1lLmdldFNlY29uZHMoKSA8PSA5ID8gXCIwXCIgOiBcIlwiKSArIGR0VGltZS5nZXRTZWNvbmRzKCk7XHJcblxyXG5cclxuICAgICQoXCIjYXV0b1JlZnJlc2hcIiArIGF0dHJpZCkuY2hpbGRyZW4oJ3NwYW4nKS5odG1sKFwiUHLDs3hpbWEgYXR1YWxpemHDp8OjbyBcIiArIGhyICsgXCI6XCIgKyBtbiArIFwiOlwiICsgc2MpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBMREZBdXRvUmVmcmVzaFRhYmxlKGF0dHJpZClcclxue1xyXG4gICAgTERGVGFibGVSZXN0YXJ0Q291bnRlcihhdHRyaWQpOyAgICBcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogbGRmVGFibGVMb2FkQ2FsbGJhY2tBcnJheVthdHRyaWRdLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgZGF0YTogeyAncGFnZU51bWJlcic6IGxkZlRhYmxlQ3VyUGFnZUF0dHJpYnV0ZVthdHRyaWRdLCAnb3JkZXJEYXRhJzogbGRmVGFibGVPcmRlckFycmF5W2F0dHJpZF0sICdmaWx0ZXJEYXRhJyA6IGxkZlRhYmxlRmlsdGVyRGF0YUFycmF5W2F0dHJpZF0gfSwgICAgICAgICAgICBcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICB0cmFkaXRpb25hbDp0cnVlLFxyXG4gICAgICAgIHN1Y2Nlc3MgOiBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXMuaGVhZGVyLnN0YXR1cyA9PSBmYWxzZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICBhbGVydChyZXMuaGVhZGVyLm1lc3NhZ2UpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIExERlRhYmxlUmVuZGVyQm9keShyZXMsIGF0dHJpZCk7IFxyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfSwgXHJcbiAgICAgICAgZXJyb3IgOiBmdW5jdGlvbiAoZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgTERGVGFibGVTaG93RXJyb3IoZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vXHJcbi8vRW5kIEF1dG8gUmVmcmVzaFxyXG4vL1xyXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy9cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vL1xyXG4vL0VkaXQgYW5kIFJlbW92ZSBtZXRob2RzXHJcbi8vXHJcbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vL1xyXG5cclxuXHJcbmZ1bmN0aW9uIEluaXRSb3dJbmxpbmVCdXR0b25zKGF0dHJpZClcclxue1xyXG4gICAgJChcIi5sZGZUYWJsZUVkaXRSb3dfXCIgKyBhdHRyaWQpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGN1ck9iamVjdCAgID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgcGFyZW50VFIgICAgPSAkKHRoaXMpLmNsb3Nlc3QoXCJ0clwiKTtcclxuXHJcbiAgICAgICAgaWYgKCQocGFyZW50VFIpLmF0dHIoXCJkYXRhLWVkaXRpbmdcIikgPT0gXCJ0cnVlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTYXZlUm93KGF0dHJpZCwgY3VyT2JqZWN0LCBwYXJlbnRUUik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgRWRpdFJvdyhhdHRyaWQsIGN1ck9iamVjdCwgcGFyZW50VFIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIubGRmVGFibGVSZW1vdmVSb3dfXCIgKyBhdHRyaWQpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHBhcmVudFRSICAgID0gJCh0aGlzKS5jbG9zZXN0KFwidHJcIik7XHJcblxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogbGRmVGFibGVSZW1vdmVDYWxsQmFja0FycmF5W2F0dHJpZF0sXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGRhdGE6IHsgJ3Jvd0lEJzogcGFyZW50VFIuYXR0cihcImRhdGEtcm93aWRcIikgfSxcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB0cmFkaXRpb25hbDogdHJ1ZSxcclxuICAgICAgICAgICAgc3VjY2VzcyA6IGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMgPT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBsZGZUYWJsZUxvYWRDYWxsYmFja0FycmF5W2F0dHJpZF0sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ0pTT04nLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgJ3BhZ2VOdW1iZXInOiBsZGZUYWJsZUN1clBhZ2VBdHRyaWJ1dGVbYXR0cmlkXSwgJ29yZGVyRGF0YSc6IGxkZlRhYmxlT3JkZXJBcnJheVthdHRyaWRdLCAnZmlsdGVyRGF0YScgOiBsZGZUYWJsZUZpbHRlckRhdGFBcnJheVthdHRyaWRdfSwgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhZGl0aW9uYWw6dHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA6IGZ1bmN0aW9uIChyZXMpIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmhlYWRlci5zdGF0dXMgPT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChyZXMuaGVhZGVyLm1lc3NhZ2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTERGVGFibGVSZW5kZXJCb2R5KHJlcywgYXR0cmlkKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIExERlRhYmxlU2hvd0Vycm9yKGUsIGpxeGhyLCBzZXR0aW5ncywgZXhjZXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIkluZmVsaXptZW50ZSBuw6NvIGZvaSBwb3Nzw612ZWwgYWx0ZXJhciBvIHJlZ2lzdG8gcHJldGVuZGlkb1wiKTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBcclxuICAgICAgICAgICAgZXJyb3IgOiBmdW5jdGlvbiAoZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIExERlRhYmxlU2hvd0Vycm9yKGUsIGpxeGhyLCBzZXR0aW5ncywgZXhjZXB0aW9uKTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICB9KTsgICAgXHJcbiAgICB9KTsgICAgXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBFZGl0Um93KGF0dHJpZCwgY3VyT2JqZWN0LCBwYXJlbnRUUilcclxue1xyXG4gICAgJChwYXJlbnRUUikuYXR0cihcImRhdGEtZWRpdGluZ1wiLCBcInRydWVcIik7XHJcblxyXG4gICAgXHJcbiAgICAkKGN1ck9iamVjdCkuaHRtbChcIjxsaSBjbGFzcz0nZmEgZmEtc2F2ZSc+PC9saT4gR3JhdmFyXCIpO1xyXG5cclxuICAgIC8vJChjdXJPYmplY3QpLnBhcmVudCgpLmFwcGVuZChcIjxpbnB1dCB0eXBlPSdidXR0b24nIGNsYXNzPSdsZGZUYWJsZUNhbmNlbEVkaXRSb3dfXCIgKyBhdHRyaWQgKyBcIicgdmFsdWU9J0NhbmNlbGFyJy8+XCIpO1xyXG4gICAgJChjdXJPYmplY3QpLnBhcmVudCgpLmFwcGVuZChcIjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0nYnRuIGJ0bi13YXJuaW5nIGxkZlRhYmxlQ2FuY2VsRWRpdFJvd19cIiArIGF0dHJpZCArIFwiJyB2YWx1ZT0nQ2FuY2VsYXInPjxsaSBjbGFzcz0nZmEgZmEtcmV0d2VldCc+PC9saT4gQ2FuY2VsYXI8L2J1dHRvbj5cIik7XHJcbiAgICBJbml0Um93SW5saW5lQ2FuY2VsQnV0dG9uKGF0dHJpZCk7XHJcbiAgICB2YXIgcm93SUQgICAgICAgPSBwYXJlbnRUUi5hdHRyKFwiZGF0YS1yb3dpZFwiKTtcclxuXHJcbiAgICAkLmVhY2gobGRmVGFibGVIZWFkZXJBcnJheVthdHRyaWRdLCBmdW5jdGlvbiAoZGF0YWtleSwgZGF0YVZhbHVlKSB7XHJcbiAgICBcclxuICAgICAgICBpZiAoZGF0YVZhbHVlLmhlYWRlckVkaXRhYmxlID09IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkLmVhY2goJChwYXJlbnRUUikuY2hpbGRyZW4oXCJ0ZFwiKSwgZnVuY3Rpb24gKHRka2V5LCB0ZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0ZFZhbHVlKS5hdHRyKFwiZGF0YS1jb2x1bW5cIikgPT0gZGF0YVZhbHVlLmhlYWRlcklEIClcclxuICAgICAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgJCh0ZFZhbHVlKS5hdHRyKFwiZGF0YS1jdXJWYWx1ZVwiLCAkKHRkVmFsdWUpLmh0bWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9pZiAoaGVhZGVyVmFsdWVbXCJoZWFkZXJUeXBlXCJdICE9IG51bGwgJiYgaGVhZGVyVmFsdWVbXCJoZWFkZXJUeXBlXCJdLmluZGV4T2YoXCJTeXN0ZW0uRGF0ZVRpbWVcIikgIT0gLTEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5odG1sKFJlbmRlckVkaXRvckZpZWxkKGRhdGFWYWx1ZSwgJCh0ZFZhbHVlKS5odG1sKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubGRmZWRpdGFibGUubWluaW1hbCcpLmlDaGVjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94Q2xhc3M6ICdpY2hlY2tib3hfZmxhdC1ncmVlbidcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvL1snZGF0YS1jb2x1bW4nPSdcIiArIGRhdGFWYWx1ZS5oZWFkZXJJRCArIFwiJ11cIilcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gU2F2ZVJvdyhhdHRyaWQsIGN1ck9iamVjdCwgcGFyZW50VFIpXHJcbntcclxuICAgIHZhciBqc29uT2JqZWN0ICAgICAgPSBuZXcgT2JqZWN0KCk7XHJcbiAgICB2YXIganNvbk9iamVjdFRleHQgID0gbmV3IE9iamVjdCgpO1xyXG5cclxuICAgICQuZWFjaCgkKHBhcmVudFRSKS5jaGlsZHJlbihcInRkW2RhdGEtZWRpdGFibGU9J3RydWUnXVwiKSwgZnVuY3Rpb24gKHRka2V5LCB0ZFZhbHVlKSB7XHJcbiAgICAgICAgJC5lYWNoKGxkZlRhYmxlSGVhZGVyQXJyYXlbYXR0cmlkXSwgZnVuY3Rpb24gKGRhdGFrZXksIGRhdGFWYWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YVZhbHVlLmhlYWRlcklEID09ICQodGRWYWx1ZSkuYXR0cihcImRhdGEtY29sdW1uXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlRGF0YSA9IEdldEVkaXRvckZpZWxkVmFsdWUoZGF0YVZhbHVlLCB0ZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoY2hhbmdlRGF0YS5pZCkgIT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGpzb25PYmplY3RbZGF0YVZhbHVlLmhlYWRlcklEXSA9IGNoYW5nZURhdGEuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAganNvbk9iamVjdFRleHRbZGF0YVZhbHVlLmhlYWRlcklEXSA9IGNoYW5nZURhdGEub3B0aW9uVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGpzb25PYmplY3RbZGF0YVZhbHVlLmhlYWRlcklEXSA9IGpzb25PYmplY3RUZXh0W2RhdGFWYWx1ZS5oZWFkZXJJRF0gPSBjaGFuZ2VEYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiBsZGZUYWJsZUVkaXRDYWxsQmFja0FycmF5W2F0dHJpZF0sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICBkYXRhOiB7ICdyb3dJRCc6IHBhcmVudFRSLmF0dHIoXCJkYXRhLXJvd2lkXCIpLCAnZmllbGRzJzogSlNPTi5zdHJpbmdpZnkoanNvbk9iamVjdCkgfSxcclxuICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgdHJhZGl0aW9uYWw6IHRydWUsXHJcbiAgICAgICAgc3VjY2VzcyA6IGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgaWYgKHJlcy5oZWFkZXIuc3RhdHVzID09IGZhbHNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgIGFsZXJ0KHJlcy5oZWFkZXIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRUUi5hdHRyKFwiZGF0YS1lZGl0aW5nXCIsIFwiZmFsc2VcIik7XHJcbiAgICAgICAgICAgICAgICAkKHBhcmVudFRSKS5maW5kKFwiYnV0dG9uLmxkZlRhYmxlQ2FuY2VsRWRpdFJvd19cIiArIGF0dHJpZCkucmVtb3ZlKCk7ICAgIFxyXG5cclxuICAgICAgICAgICAgICAgICQoY3VyT2JqZWN0KS5odG1sKFwiPGxpIGNsYXNzPSdmYSBmYS1lZGl0Jz48L2xpPiBFZGl0YXJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCQocGFyZW50VFIpLmNoaWxkcmVuKFwidGRbZGF0YS1lZGl0YWJsZT0ndHJ1ZSddXCIpLCBmdW5jdGlvbiAodGRrZXksIHRkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2gobGRmVGFibGVIZWFkZXJBcnJheVthdHRyaWRdLCBmdW5jdGlvbiAoZGF0YWtleSwgZGF0YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhVmFsdWUuaGVhZGVySUQgPT0gJCh0ZFZhbHVlKS5hdHRyKFwiZGF0YS1jb2x1bW5cIikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGRWYWx1ZSkuaHRtbChqc29uT2JqZWN0VGV4dFtkYXRhVmFsdWUuaGVhZGVySURdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7ICAgXHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICB9LCAgICAgICBcclxuICAgICAgICBlcnJvciA6IGZ1bmN0aW9uIChlLCBqcXhociwgc2V0dGluZ3MsIGV4Y2VwdGlvbikge1xyXG4gICAgICAgICAgICBMREZUYWJsZVNob3dFcnJvcihlLCBqcXhociwgc2V0dGluZ3MsIGV4Y2VwdGlvbik7XHJcbiAgICAgICAgfSAgICAgICAgICAgICAgICAgICBcclxuICAgIH0pOyAgICAgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIEluaXRSb3dJbmxpbmVDYW5jZWxCdXR0b24oYXR0cmlkKVxyXG57XHJcbiAgICAkKFwiLmxkZlRhYmxlQ2FuY2VsRWRpdFJvd19cIiArIGF0dHJpZCkub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgY3VyT2JqZWN0ICAgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBwYXJlbnRUUiAgICA9ICQodGhpcykuY2xvc2VzdChcInRyXCIpO1xyXG4gICAgICAgICQuZWFjaCgkKHBhcmVudFRSKS5jaGlsZHJlbihcInRkW2RhdGEtZWRpdGFibGU9J3RydWUnXVwiKSwgZnVuY3Rpb24gKHRka2V5LCB0ZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICQodGRWYWx1ZSkuaHRtbCgkKHRkVmFsdWUpLmF0dHIoXCJkYXRhLWN1clZhbHVlXCIpKTtcclxuICAgICAgICAgICAgJCh0ZFZhbHVlKS5hdHRyKFwiZGF0YS1jdXJWYWx1ZVwiLCBcIlwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY3VyT2JqZWN0LnJlbW92ZSgpO1xyXG4gICAgICAgIHZhciBlZGl0T2JqID0gJChwYXJlbnRUUikuZmluZChcImJ1dHRvbi5sZGZUYWJsZUVkaXRSb3dfXCIgKyBhdHRyaWQpO1xyXG5cclxuICAgICAgICAkKGVkaXRPYmopLmh0bWwoXCI8bGkgY2xhc3M9J2ZhIGZhLWVkaXQnPjwvbGk+IEVkaXRhclwiKTtcclxuXHJcbiAgICAgICAgcGFyZW50VFIuYXR0cihcImRhdGEtZWRpdGluZ1wiLCBcImZhbHNlXCIpO1xyXG4gICAgfSk7ICAgICAgICBcclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBSZW5kZXJFZGl0b3JGaWVsZChjb2xPYmplY3QsIHZhbHVlKVxyXG57XHJcbiAgICBpZiAoY29sT2JqZWN0LmhlYWRlclR5cGUuaW5kZXhPZihcIlN0cmluZ1wiKSAhPSAtMSB8fCBjb2xPYmplY3QuaGVhZGVyVHlwZS5pbmRleE9mKFwiSW50XCIpICE9IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiPGlucHV0IHR5cGU9J3RleHQnIGNsYXNzPSdmb3JtLWNvbnRyb2wnIHZhbHVlPSdcIiArIHZhbHVlICsgXCInIC8+XCI7XHJcbiAgICB9IGVsc2UgaWYgKGNvbE9iamVjdC5oZWFkZXJUeXBlLmluZGV4T2YoXCJEYXRlVGltZVwiKSAhPSAtMSkge1xyXG4gICAgICAgIHJldHVybiBcIjxpbnB1dCB0eXBlPSd0ZXh0JyBjbGFzcz0nZm9ybS1jb250cm9sJyB2YWx1ZT0nXCIgKyB2YWx1ZSArIFwiJyAvPlwiO1xyXG4gICAgfSBlbHNlIGlmIChjb2xPYmplY3QuaGVhZGVyVHlwZS5pbmRleE9mKFwiU2VsZWN0TGlzdFwiKSAhPSAtMSB8fCBjb2xPYmplY3QuaGVhZGVyVHlwZS5pbmRleE9mKFwiQm9vbGVhblwiKSAhPSAtMSkge1xyXG4gICAgICAgIHZhciBpdGVtID0gXCJcIjtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgYyBpbiBjb2xPYmplY3QuaGVhZGVyRWRpdENvbnRlbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoY29sT2JqZWN0LmhlYWRlckVkaXRDb250ZW50Lmhhc093blByb3BlcnR5KGMpKSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBjb2xPYmplY3QuaGVhZGVyRWRpdENvbnRlbnRbY10pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBcInNlbGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpdGVtICs9IFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBjICsgXCInIFwiICsgIHNlbGVjdGVkICsgXCI+XCIgKyBjb2xPYmplY3QuaGVhZGVyRWRpdENvbnRlbnRbY10gKyBcIjwvb3B0aW9uPlwiO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXCI8c2VsZWN0IGNsYXNzPSdmb3JtLWNvbnRyb2wnPlwiICsgaXRlbSArIFwiPC9zZWxlY3Q+XCI7XHJcbiAgICB9IFxyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRFZGl0b3JGaWVsZFZhbHVlKGNvbE9iamVjdCwgZWRpdE9iamVjdClcclxue1xyXG4gICAgaWYgKGNvbE9iamVjdC5oZWFkZXJUeXBlLmluZGV4T2YoXCJTdHJpbmdcIikgIT0gLTEgfHwgY29sT2JqZWN0LmhlYWRlclR5cGUuaW5kZXhPZihcIkludFwiKSAhPSAtMSApIHtcclxuICAgICAgICByZXR1cm4gJChlZGl0T2JqZWN0KS5jaGlsZHJlbigpLnZhbCgpO1xyXG4gICAgfSBlbHNlIGlmIChjb2xPYmplY3QuaGVhZGVyVHlwZS5pbmRleE9mKFwiRGF0ZVRpbWVcIikgIT0gLTEpIHtcclxuICAgICAgICByZXR1cm4gJChlZGl0T2JqZWN0KS5jaGlsZHJlbigpLnZhbCgpO1xyXG4gICAgfSBlbHNlIGlmIChjb2xPYmplY3QuaGVhZGVyVHlwZS5pbmRleE9mKFwiU2VsZWN0TGlzdFwiKSAhPSAtMSB8fCBjb2xPYmplY3QuaGVhZGVyVHlwZS5pbmRleE9mKFwiQm9vbGVhblwiKSAhPSAtMSkge1xyXG4gICAgICAgIHZhciBqc29uQXJyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6ICQoZWRpdE9iamVjdCkuY2hpbGRyZW4oKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25WYWx1ZVwiIDogJChcIm9wdGlvbjpzZWxlY3RlZFwiLCAkKGVkaXRPYmplY3QpLmNoaWxkcmVuKCkpLnRleHQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ganNvbkFycjtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy9cclxuLy9FbmQgRWRpdCBhbmQgUmVtb3ZlIG1ldGhvZHNcclxuLy9cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vXHJcbi8vQXV4IE1ldGhvZHNcclxuLy9cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vXHJcblxyXG5mdW5jdGlvbiBodG1sRXNjYXBlKHN0cikge1xyXG4gICAgcmV0dXJuIFN0cmluZyhzdHIpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8mL2csICcmYW1wOycpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcclxuICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgJyYjMzk7JylcclxuICAgICAgICAgICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvPi9nLCAnJmd0OycpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gVG9KYXZhU2NyaXB0RGF0ZSh2YWx1ZSkge1xyXG4gICAgdmFyIHBhdHRlcm47XHJcbiAgICB2YXIgcmVzdWx0cztcclxuICAgIHZhciBkdDtcclxuICAgIHZhciByZXM7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHBhdHRlcm4gPSAvRGF0ZVxcKChbXildKylcXCkvO1xyXG4gICAgICAgIHJlc3VsdHMgPSBwYXR0ZXJuLmV4ZWModmFsdWUpO1xyXG4gICAgICAgIGR0ID0gbmV3IERhdGUocGFyc2VGbG9hdChyZXN1bHRzWzFdKSk7XHJcbiAgICAgICAgcmVzID0gKGR0LmdldE1vbnRoKCkgKyAxKSArIFwiL1wiICsgZHQuZ2V0RGF0ZSgpICsgXCIvXCIgKyBkdC5nZXRGdWxsWWVhcigpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJsZGZUYWJsZSB8IFRvSmF2YVNjcmlwdERhdGVcIiArIGVyci5tZXNzYWdlKTtcclxuICAgICAgICByZXMgPSBcIlwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG5cclxuZnVuY3Rpb24gTERGVGFibGVTaG93RXJyb3IoZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pXHJcbntcclxuICAgIGFsZXJ0KCdEZSBtb21lbnRvIG7Do28gw6kgcG9zc8OtdmVsIHNhdGlzZmF6ZXIgbyBzZXUgcGVkaWRvJyk7XHJcbiAgICBcclxufVxyXG5cclxuZnVuY3Rpb24gSnNvbkZpZWxkcyhmaWVsZHMpXHJcbntcclxuXHJcbiAgICB2YXIgZmllbGRBcnJheSAgPSBmaWVsZHMuc3BsaXQoXCImXCIpO1xyXG4gICAgdmFyIGZpZWxkT2JqZWN0ID0gXCJcIjtcclxuXHJcbiAgICAkLmVhY2goZmllbGRBcnJheSwgZnVuY3Rpb24oaWR4LCBlbGVtKSB7XHJcbiAgICAgICAgdmFyIGFyciA9IGZpZWxkQXJyYXlbaWR4XS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGZpZWxkT2JqZWN0ICE9IFwiXCIpXHJcbiAgICAgICAgICAgIGZpZWxkT2JqZWN0ICs9IFwiLFwiO1xyXG4gICAgICAgIGZpZWxkT2JqZWN0ICs9IFwieydmaWVsZE5hbWUnOidcIiArIGFyclswXSArIFwiJywnZmllbGRWYWx1ZSc6J1wiICsgYXJyWzFdICsgXCInfVwiO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoZmllbGRPYmplY3QgIT0gXCJcIilcclxuICAgIHtcclxuICAgICAgICBmaWVsZE9iamVjdCA9IFwiW1wiICsgZmllbGRPYmplY3QgKyBcIl1cIjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmllbGRPYmplY3Q7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBMb2FkTERGVGFibGUoYXR0cmlkKVxyXG57XHJcbiAgICAkLmFqYXgoeyBcclxuICAgICAgICB1cmw6IGxkZlRhYmxlTG9hZENhbGxiYWNrQXJyYXlbYXR0cmlkXSwgXHJcbiAgICAgICAgZGF0YVR5cGU6ICdKU09OJywgXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgc3VjY2VzcyA6IGZ1bmN0aW9uIChyZXMpIHsgXHJcbiAgICAgICAgICAgIGlmIChyZXMuaGVhZGVyLnN0YXR1cyA9PSBmYWxzZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICBhbGVydChyZXMuaGVhZGVyLm1lc3NhZ2UpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIExERlRhYmxlUmVuZGVyQm9keShyZXMsIGF0dHJpZCk7IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgTERGVGFibGVTaG93RXJyb3IoZSwganF4aHIsIHNldHRpbmdzLCBleGNlcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59IFxyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vXHJcbi8vRW5kIEF1eCBNZXRob2RzXHJcbi8vXHJcbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==