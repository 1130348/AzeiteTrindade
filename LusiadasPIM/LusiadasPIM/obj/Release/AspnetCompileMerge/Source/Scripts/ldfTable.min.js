function LDFTableSort(e,a){var t=$(e),r=t.attr("data-sortable");if("True"==r){var l=t.attr("data-field"),d="1";void 0!=t.attr("data-order")&&(d=t.attr("data-order"));var i=[];i[0]=l,i[1]=d,$.ajax({url:ldfTableOrderCallbackArray[a],dataType:"json",data:{orderValues:i},type:"POST",traditional:!0}).done(function(e){var r=-1*parseInt(d);t.attr("data-order",r),t.siblings().removeClass("sortAsc"),t.siblings().removeClass("sortDesc"),t.siblings().removeClass("active"),t.removeClass("sortAsc"),t.removeClass("sortDesc"),t.addClass(1==r?"sortAsc":"sortDesc"),t.addClass("active"),ldfTableCurPageAttribute[a]="1",LDFTableRenderBody(e,a)})}}function LDFTableRenderBody(e,a){var t=e.pageCount,r=e.rowCount;e=e.list_rows,ldfTableTBodyArray[a].empty(),0==$(e).length&&(row="<tr><td colspan='"+$(ldfTableHeaderArray[a]).length+"' style='text-align:center;'>Sem registos</td></tr>",ldfTableTBodyArray[a].append(row)),$.each(e,function(e,t){var r="<tr>";$.each(t.rowItems,function(e,t){$.each(ldfTableHeaderArray[a],function(e,a){if(t.itemColumnName==a.headerID&&0!=a.headerVisible){var l=t.itemValue;null!=l?null!=a.headerType&&-1!=a.headerType.indexOf("System.DateTime")&&(l=ToJavaScriptDate(l)):l="",null!=t.itemLink&&""!==t.itemLink&&(l='<a href="'+t.itemLink+'">'+l+"</a>");var d="False";d=0==a.headerMobile?"False":"True",r+="<td data-showMobile='"+d+"'>"+l+"</td>"}}),"true"==ldfTableAttributes[a].canEditRow&&(r+="<td><input type='button' value='Editar'/></td>"),"true"==ldfTableAttributes[a].canDeleteRow&&(r+="<td><input type='button' value='Remover'/></td>")}),r+="</tr>",ldfTableTBodyArray[a].append(r)}),LDFTableRenderPages(t,r,a)}function LDFTableRenderPages(e,a,t){var r=0,l="",d=0;for(ldfTableDivFooterArray[t].empty(),r=0;e>=r;r++)l=r+1==ldfTableCurPageAttribute[t]?"active":"",hidePage="",r+1>5&&(e>=r&&(hidePage="hidden",d+=1),r+1<=ldfTableCurPageAttribute[t]&&(""!=hidePage&&(d-=1),hidePage="")),itemPage="<li class='"+l+" "+hidePage+"'><a href='#' data-page='"+(r+1)+"' data-order='1'>"+(r+1)+"</a></li>",ldfTableDivFooterArray[t].append(itemPage);d>0&&(itemPage="<li><a href='#' data-page='0'>...</a></li>",ldfTableDivFooterArray[t].append(itemPage)),ldfTableDivFooterArray[t].parent().find(".row").remove(),itemPage="<div class='row' style='position: relative;width: 100%;margin-top: -10px;'><span class='rowCount'>Total: "+a+" Registos</span></div>",ldfTableDivFooterArray[t].parent().append(itemPage)}function LDFTableChangePage(e,a){var t=[];if(0==e){var r=$(ldfTableDivFooterArray[a])[0].id,l=0;$("#"+r+" li.hidden").each(function(){10>=l&&($(this).removeClass("hidden"),l++)}),0==$("#"+r+" li.hidden").length&&$("#"+r+" li").find("[data-page='0']").remove()}else{var d=ldfTableTHeaderArray[a].find("th.active");t[0]=d.attr("data-field"),t[1]=d.attr("data-order"),$.ajax({url:ldfTablePageCallbackArray[a],dataType:"json",data:{pageNumber:e,orderData:t},type:"POST",traditional:!0}).done(function(t){ldfTableCurPageAttribute[a]=e,LDFTableRenderBody(t,a)})}}function ToJavaScriptDate(e){var a,t,r,l;try{a=/Date\(([^)]+)\)/,t=a.exec(e),r=new Date(parseFloat(t[1])),l=r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear()}catch(d){console.log("ldfTable | ToJavaScriptDate"+d.message),l=""}return l}function LDFTableResetCounter(e){clearInterval(ldfTableRefreshTimeObject[e])}function LDFTableRestartCounter(e){var a=ldfTableRefreshTime[e];ldfTableRefreshTimeObject[e]=setInterval(function(){UpdateRefreshHeader(e,a),window[ldfTableRefreshCallBackArray[e]]()},a)}function UpdateRefreshHeader(e,a){var t=new Date;t.setSeconds(t.getSeconds()+a/1e3);var r=(t.getHours()<=9?"0":"")+t.getHours(),l=(t.getMinutes()<=9?"0":"")+t.getMinutes(),d=(t.getSeconds()<=9?"0":"")+t.getSeconds();$("#autoRefresh"+e).children("span").html("Próxima atualização "+r+":"+l+":"+d)}$(".internalFooter").on("click","li > a",function(e){e.preventDefault()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxkZlRhYmxlLmpzIl0sIm5hbWVzIjpbIkxERlRhYmxlU29ydCIsIm9iaiIsImF0dHJpZCIsImN1ck9iamVjdCIsIiQiLCJpc1NvcnRhYmxlIiwiYXR0ciIsImZpZWxkTmFtZSIsIm9yZGVyVmFsdWUiLCJ1bmRlZmluZWQiLCJvcmRlckRhdGEiLCJhamF4IiwidXJsIiwibGRmVGFibGVPcmRlckNhbGxiYWNrQXJyYXkiLCJkYXRhVHlwZSIsImRhdGEiLCJvcmRlclZhbHVlcyIsInR5cGUiLCJ0cmFkaXRpb25hbCIsImRvbmUiLCJyZXMiLCJ2YWx1ZSIsInBhcnNlSW50Iiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwibGRmVGFibGVDdXJQYWdlQXR0cmlidXRlIiwiTERGVGFibGVSZW5kZXJCb2R5IiwicGFnZUNvdW50Iiwicm93Q291bnQiLCJsaXN0X3Jvd3MiLCJsZGZUYWJsZVRCb2R5QXJyYXkiLCJlbXB0eSIsImxlbmd0aCIsInJvdyIsImxkZlRhYmxlSGVhZGVyQXJyYXkiLCJhcHBlbmQiLCJlYWNoIiwiZGF0YWtleSIsImRhdGFWYWx1ZSIsInJvd0l0ZW1zIiwicm93S2V5Iiwicm93VmFsdWUiLCJoZWFkZXJLZXkiLCJoZWFkZXJWYWx1ZSIsIml0ZW1Db2x1bW5OYW1lIiwiaXRlbVZhbHVlIiwiaW5kZXhPZiIsIlRvSmF2YVNjcmlwdERhdGUiLCJpdGVtTGluayIsImF0dHJNb2JpbGUiLCJsZGZUYWJsZUF0dHJpYnV0ZXMiLCJjYW5FZGl0Um93IiwiY2FuRGVsZXRlUm93IiwiTERGVGFibGVSZW5kZXJQYWdlcyIsImkiLCJhY3RpdmVQYWdlIiwibkhpZGVQYWdlcyIsImxkZlRhYmxlRGl2Rm9vdGVyQXJyYXkiLCJoaWRlUGFnZSIsIml0ZW1QYWdlIiwicGFyZW50IiwiZmluZCIsInJlbW92ZSIsIkxERlRhYmxlQ2hhbmdlUGFnZSIsInBhZ2UiLCJvYmpJRCIsImlkIiwiaWR4IiwidGhpcyIsImVsZW0iLCJsZGZUYWJsZVRIZWFkZXJBcnJheSIsImxkZlRhYmxlUGFnZUNhbGxiYWNrQXJyYXkiLCJwYWdlTnVtYmVyIiwicGF0dGVybiIsInJlc3VsdHMiLCJkdCIsImV4ZWMiLCJEYXRlIiwicGFyc2VGbG9hdCIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwiZXJyIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2UiLCJMREZUYWJsZVJlc2V0Q291bnRlciIsImNsZWFySW50ZXJ2YWwiLCJsZGZUYWJsZVJlZnJlc2hUaW1lT2JqZWN0IiwiTERGVGFibGVSZXN0YXJ0Q291bnRlciIsInRpbWVvdXRDb3VudCIsImxkZlRhYmxlUmVmcmVzaFRpbWUiLCJzZXRJbnRlcnZhbCIsIlVwZGF0ZVJlZnJlc2hIZWFkZXIiLCJ3aW5kb3ciLCJsZGZUYWJsZVJlZnJlc2hDYWxsQmFja0FycmF5IiwidGltZSIsImR0VGltZSIsInNldFNlY29uZHMiLCJnZXRTZWNvbmRzIiwiaHIiLCJnZXRIb3VycyIsIm1uIiwiZ2V0TWludXRlcyIsInNjIiwiY2hpbGRyZW4iLCJodG1sIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiXSwibWFwcGluZ3MiOiJBQUFBLFFBQVNBLGNBQWFDLEVBQUtDLEdBRXZCLEdBQUlDLEdBQVlDLEVBQUVILEdBQ2RJLEVBQWFGLEVBQVVHLEtBQUssZ0JBRWhDLElBQWtCLFFBQWRELEVBQ0osQ0FDSSxHQUFJRSxHQUFZSixFQUFVRyxLQUFLLGNBQzNCRSxFQUFhLEdBRW1CQyxTQUFoQ04sRUFBVUcsS0FBSyxnQkFDZkUsRUFBYUwsRUFBVUcsS0FBSyxjQUdoQyxJQUFJSSxLQUNKQSxHQUFVLEdBQUtILEVBQ2ZHLEVBQVUsR0FBS0YsRUFFZkosRUFBRU8sTUFDRUMsSUFBVUMsMkJBQTJCWCxHQUNyQ1ksU0FBVSxPQUNWQyxNQUFZQyxZQUFlTixHQUMzQk8sS0FBVSxPQUNWQyxhQUFhLElBQ2RDLEtBQUssU0FBVUMsR0FFZCxHQUFJQyxHQUErQixHQUF2QkMsU0FBU2QsRUFDckJMLEdBQVVHLEtBQUssYUFBY2UsR0FF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LEtBQ2pCb0IsR0FBT0MsV0FBV0QsRUFBT0UsYUFBZ0JILEVBQUssSUFDOUMsSUFBSUksSUFBTUgsRUFBT0ksWUFBYyxFQUFJLElBQU0sSUFBTUosRUFBT0ksV0FDbERDLEdBQU1MLEVBQU9NLGNBQWdCLEVBQUksSUFBTSxJQUFNTixFQUFPTSxhQUNwREMsR0FBTVAsRUFBT0UsY0FBZ0IsRUFBSSxJQUFNLElBQU1GLEVBQU9FLFlBR3hEaEcsR0FBRSxlQUFpQkYsR0FBUXdHLFNBQVMsUUFBUUMsS0FBSyx1QkFBeUJOLEVBQUssSUFBTUUsRUFBSyxJQUFNRSxHQXZOcEdyRyxFQUFFLG1CQUFtQndHLEdBQUcsUUFBUyxTQUFVLFNBQVVDLEdBQ2pEQSxFQUFFQyIsImZpbGUiOiJsZGZUYWJsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBMREZUYWJsZVNvcnQob2JqLCBhdHRyaWQpXHJcbntcclxuICAgIHZhciBjdXJPYmplY3QgPSAkKG9iaik7XHJcbiAgICB2YXIgaXNTb3J0YWJsZSA9IGN1ck9iamVjdC5hdHRyKFwiZGF0YS1zb3J0YWJsZVwiKTtcclxuXHJcbiAgICBpZiAoaXNTb3J0YWJsZSA9PSBcIlRydWVcIikgXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGN1ck9iamVjdC5hdHRyKFwiZGF0YS1maWVsZFwiKTtcclxuICAgICAgICB2YXIgb3JkZXJWYWx1ZSA9IFwiMVwiO1xyXG5cclxuICAgICAgICBpZiAoY3VyT2JqZWN0LmF0dHIoXCJkYXRhLW9yZGVyXCIpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvcmRlclZhbHVlID0gY3VyT2JqZWN0LmF0dHIoXCJkYXRhLW9yZGVyXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG9yZGVyRGF0YSA9IFtdO1xyXG4gICAgICAgIG9yZGVyRGF0YVswXSA9IGZpZWxkTmFtZTtcclxuICAgICAgICBvcmRlckRhdGFbMV0gPSBvcmRlclZhbHVlO1xyXG5cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICAgICAgbGRmVGFibGVPcmRlckNhbGxiYWNrQXJyYXlbYXR0cmlkXSxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgZGF0YTogICAgIHsgXCJvcmRlclZhbHVlc1wiOiBvcmRlckRhdGEgfSxcclxuICAgICAgICAgICAgdHlwZTogICAgICdQT1NUJyxcclxuICAgICAgICAgICAgdHJhZGl0aW9uYWw6IHRydWUsIFxyXG4gICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKHJlcykgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZUludChvcmRlclZhbHVlKSAqIC0xO1xyXG4gICAgICAgICAgICBjdXJPYmplY3QuYXR0cihcImRhdGEtb3JkZXJcIiwgdmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgY3VyT2JqZWN0LnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJzb3J0QXNjXCIpO1xyXG4gICAgICAgICAgICBjdXJPYmplY3Quc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcInNvcnREZXNjXCIpO1xyXG4gICAgICAgICAgICBjdXJPYmplY3Quc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHJcbiAgICAgICAgICAgIGN1ck9iamVjdC5yZW1vdmVDbGFzcyhcInNvcnRBc2NcIik7XHJcbiAgICAgICAgICAgIGN1ck9iamVjdC5yZW1vdmVDbGFzcyhcInNvcnREZXNjXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGN1ck9iamVjdC5hZGRDbGFzcyhcInNvcnRBc2NcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmplY3QuYWRkQ2xhc3MoXCJzb3J0RGVzY1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJPYmplY3QuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZGZUYWJsZUN1clBhZ2VBdHRyaWJ1dGVbYXR0cmlkXSA9IFwiMVwiO1xyXG4gICAgICAgICAgICBMREZUYWJsZVJlbmRlckJvZHkocmVzLCBhdHRyaWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuJChcIi5pbnRlcm5hbEZvb3RlclwiKS5vbihcImNsaWNrXCIsIFwibGkgPiBhXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gTERGVGFibGVSZW5kZXJCb2R5KGRhdGEsIGF0dHJpZCkge1xyXG4gICAgdmFyIHBhZ2VDb3VudCAgICA9IGRhdGEucGFnZUNvdW50O1xyXG4gICAgdmFyIHJvd0NvdW50ICAgICA9IGRhdGEucm93Q291bnQ7XHJcbiAgICBkYXRhICAgICAgICAgICAgID0gZGF0YS5saXN0X3Jvd3M7XHJcblxyXG4gICAgbGRmVGFibGVUQm9keUFycmF5W2F0dHJpZF0uZW1wdHkoKTtcclxuXHJcbiAgICBpZiAoJChkYXRhKS5sZW5ndGggPT0gMClcclxuICAgIHtcclxuICAgICAgICByb3cgPSBcIjx0cj48dGQgY29sc3Bhbj0nXCIgKyAkKGxkZlRhYmxlSGVhZGVyQXJyYXlbYXR0cmlkXSkubGVuZ3RoICsgXCInIHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjsnPlNlbSByZWdpc3RvczwvdGQ+PC90cj5cIjtcclxuICAgICAgICBsZGZUYWJsZVRCb2R5QXJyYXlbYXR0cmlkXS5hcHBlbmQocm93KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChkYXRha2V5LCBkYXRhVmFsdWUpIHtcclxuICAgICAgICB2YXIgcm93ID0gXCI8dHI+XCI7XHJcblxyXG4gICAgICAgICQuZWFjaChkYXRhVmFsdWUucm93SXRlbXMsIGZ1bmN0aW9uIChyb3dLZXksIHJvd1ZhbHVlKSB7XHJcblxyXG4gICAgICAgICAgICAkLmVhY2gobGRmVGFibGVIZWFkZXJBcnJheVthdHRyaWRdLCBmdW5jdGlvbiAoaGVhZGVyS2V5LCBoZWFkZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvd1ZhbHVlLml0ZW1Db2x1bW5OYW1lID09IGhlYWRlclZhbHVlW1wiaGVhZGVySURcIl0gJiYgaGVhZGVyVmFsdWVbXCJoZWFkZXJWaXNpYmxlXCJdICE9IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcm93VmFsdWUuaXRlbVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlclZhbHVlW1wiaGVhZGVyVHlwZVwiXSAhPSBudWxsICYmIGhlYWRlclZhbHVlW1wiaGVhZGVyVHlwZVwiXS5pbmRleE9mKFwiU3lzdGVtLkRhdGVUaW1lXCIpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFRvSmF2YVNjcmlwdERhdGUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93VmFsdWUuaXRlbUxpbmsgIT0gbnVsbCAmJiByb3dWYWx1ZS5pdGVtTGluayAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFwiPGEgaHJlZj1cXFwiXCIgKyByb3dWYWx1ZS5pdGVtTGluayArIFwiXFxcIj5cIiArIHZhbHVlICsgXCI8L2E+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0ck1vYmlsZSA9IFwiRmFsc2VcIjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyVmFsdWVbXCJoZWFkZXJNb2JpbGVcIl0gPT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyTW9iaWxlID0gXCJGYWxzZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJNb2JpbGUgPSBcIlRydWVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJvdyArPSBcIjx0ZCBkYXRhLXNob3dNb2JpbGU9J1wiICsgYXR0ck1vYmlsZSArIFwiJz5cIiArIHZhbHVlICsgXCI8L3RkPlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAobGRmVGFibGVBdHRyaWJ1dGVzW2F0dHJpZF0uY2FuRWRpdFJvdyA9PSBcInRydWVcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcm93ICs9IFwiPHRkPjxpbnB1dCB0eXBlPSdidXR0b24nIHZhbHVlPSdFZGl0YXInLz48L3RkPlwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobGRmVGFibGVBdHRyaWJ1dGVzW2F0dHJpZF0uY2FuRGVsZXRlUm93ID09IFwidHJ1ZVwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByb3cgKz0gXCI8dGQ+PGlucHV0IHR5cGU9J2J1dHRvbicgdmFsdWU9J1JlbW92ZXInLz48L3RkPlwiO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgIFxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICByb3cgKz0gXCI8L3RyPlwiO1xyXG5cclxuICAgICAgICBsZGZUYWJsZVRCb2R5QXJyYXlbYXR0cmlkXS5hcHBlbmQocm93KTtcclxuICAgIH0pO1xyXG5cclxuICAgIExERlRhYmxlUmVuZGVyUGFnZXMocGFnZUNvdW50LCByb3dDb3VudCwgYXR0cmlkKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gTERGVGFibGVSZW5kZXJQYWdlcyhwYWdlQ291bnQsIHJvd0NvdW50LCBhdHRyaWQpIHtcclxuICAgIHZhciBpID0gMDtcclxuICAgIHZhciBhY3RpdmVQYWdlID0gXCJcIjtcclxuICAgIHZhciBuSGlkZVBhZ2VzID0gMDtcclxuICAgIGxkZlRhYmxlRGl2Rm9vdGVyQXJyYXlbYXR0cmlkXS5lbXB0eSgpO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPD0gcGFnZUNvdW50OyBpKyspIHtcclxuXHJcbiAgICAgICAgaWYgKChpKzEpID09IGxkZlRhYmxlQ3VyUGFnZUF0dHJpYnV0ZVthdHRyaWRdKVxyXG4gICAgICAgICAgICBhY3RpdmVQYWdlID0gXCJhY3RpdmVcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGFjdGl2ZVBhZ2UgPSBcIlwiO1xyXG5cclxuICAgICAgICBoaWRlUGFnZSA9IFwiXCI7XHJcblxyXG4gICAgICAgIGlmICgoaSsxKT41KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGkgPD0gcGFnZUNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICBoaWRlUGFnZSA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgICAgICBuSGlkZVBhZ2VzICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICgoaSsxKSA8PSBsZGZUYWJsZUN1clBhZ2VBdHRyaWJ1dGVbYXR0cmlkXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhpZGVQYWdlICE9IFwiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgbkhpZGVQYWdlcyAtPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGhpZGVQYWdlID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaXRlbVBhZ2UgPSBcIjxsaSBjbGFzcz0nXCIgKyBhY3RpdmVQYWdlICsgXCIgXCIgKyBoaWRlUGFnZSArIFwiJz48YSBocmVmPScjJyBkYXRhLXBhZ2U9J1wiICsgKGkgKyAxKSArIFwiJyBkYXRhLW9yZGVyPScxJz5cIiArIChpICsgMSkgKyBcIjwvYT48L2xpPlwiO1xyXG4gICAgICAgIGxkZlRhYmxlRGl2Rm9vdGVyQXJyYXlbYXR0cmlkXS5hcHBlbmQoaXRlbVBhZ2UpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBpZiAobkhpZGVQYWdlcyA+IDApXHJcbiAgICB7XHJcbiAgICAgICAgaXRlbVBhZ2UgPSBcIjxsaT48YSBocmVmPScjJyBkYXRhLXBhZ2U9JzAnPi4uLjwvYT48L2xpPlwiO1xyXG4gICAgICAgIGxkZlRhYmxlRGl2Rm9vdGVyQXJyYXlbYXR0cmlkXS5hcHBlbmQoaXRlbVBhZ2UpOyAgICBcclxuICAgIH1cclxuXHJcbiAgICBsZGZUYWJsZURpdkZvb3RlckFycmF5W2F0dHJpZF0ucGFyZW50KCkuZmluZChcIi5yb3dcIikucmVtb3ZlKCk7XHJcbiAgICBpdGVtUGFnZSA9IFwiPGRpdiBjbGFzcz0ncm93JyBzdHlsZT0ncG9zaXRpb246IHJlbGF0aXZlO3dpZHRoOiAxMDAlO21hcmdpbi10b3A6IC0xMHB4Oyc+PHNwYW4gY2xhc3M9J3Jvd0NvdW50Jz5Ub3RhbDogXCIgKyByb3dDb3VudCArIFwiIFJlZ2lzdG9zPC9zcGFuPjwvZGl2PlwiO1xyXG4gICAgbGRmVGFibGVEaXZGb290ZXJBcnJheVthdHRyaWRdLnBhcmVudCgpLmFwcGVuZChpdGVtUGFnZSk7XHJcblxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gTERGVGFibGVDaGFuZ2VQYWdlKHBhZ2UsIGF0dHJpZCkge1xyXG4gICAgdmFyIG9yZGVyRGF0YSA9IFtdO1xyXG5cclxuICAgIGlmIChwYWdlID09IDApIHtcclxuXHJcbiAgICAgICAgdmFyIG9iaklEICAgPSAkKGxkZlRhYmxlRGl2Rm9vdGVyQXJyYXlbYXR0cmlkXSlbMF0uaWQ7XHJcbiAgICAgICAgdmFyIGlkeCAgICAgPSAwO1xyXG4gICAgICAgICQoXCIjXCIgKyBvYmpJRCArIFwiIGxpLmhpZGRlblwiKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoaWR4IDw9IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZHggKys7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICgkKFwiI1wiICsgb2JqSUQgKyBcIiBsaS5oaWRkZW5cIikubGVuZ3RoID09IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKFwiI1wiICsgb2JqSUQgKyBcIiBsaVwiKS5maW5kKFwiW2RhdGEtcGFnZT0nMCddXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgZWxlbSA9IGxkZlRhYmxlVEhlYWRlckFycmF5W2F0dHJpZF0uZmluZChcInRoLmFjdGl2ZVwiKTtcclxuICAgICAgICBvcmRlckRhdGFbMF0gPSBlbGVtLmF0dHIoXCJkYXRhLWZpZWxkXCIpO1xyXG4gICAgICAgIG9yZGVyRGF0YVsxXSA9IGVsZW0uYXR0cihcImRhdGEtb3JkZXJcIik7XHJcblxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogbGRmVGFibGVQYWdlQ2FsbGJhY2tBcnJheVthdHRyaWRdLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICBkYXRhOiB7ICdwYWdlTnVtYmVyJzogcGFnZSwgJ29yZGVyRGF0YSc6IG9yZGVyRGF0YSB9LFxyXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHRyYWRpdGlvbmFsOiB0cnVlXHJcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgIGxkZlRhYmxlQ3VyUGFnZUF0dHJpYnV0ZVthdHRyaWRdID0gcGFnZTtcclxuICAgICAgICAgICAgTERGVGFibGVSZW5kZXJCb2R5KHJlcywgYXR0cmlkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBUb0phdmFTY3JpcHREYXRlKHZhbHVlKSB7XHJcbiAgICB2YXIgcGF0dGVybjtcclxuICAgIHZhciByZXN1bHRzO1xyXG4gICAgdmFyIGR0O1xyXG4gICAgdmFyIHJlcztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcGF0dGVybiA9IC9EYXRlXFwoKFteKV0rKVxcKS87XHJcbiAgICAgICAgcmVzdWx0cyA9IHBhdHRlcm4uZXhlYyh2YWx1ZSk7XHJcbiAgICAgICAgZHQgPSBuZXcgRGF0ZShwYXJzZUZsb2F0KHJlc3VsdHNbMV0pKTtcclxuICAgICAgICByZXMgPSAoZHQuZ2V0TW9udGgoKSArIDEpICsgXCIvXCIgKyBkdC5nZXREYXRlKCkgKyBcIi9cIiArIGR0LmdldEZ1bGxZZWFyKCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImxkZlRhYmxlIHwgVG9KYXZhU2NyaXB0RGF0ZVwiICsgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJlcyA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gTERGVGFibGVSZXNldENvdW50ZXIoYXR0cmlkKVxyXG57XHJcbiAgICBjbGVhckludGVydmFsKGxkZlRhYmxlUmVmcmVzaFRpbWVPYmplY3RbYXR0cmlkXSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIExERlRhYmxlUmVzdGFydENvdW50ZXIoYXR0cmlkKVxyXG57XHJcbiAgICB2YXIgdGltZW91dENvdW50ID0gbGRmVGFibGVSZWZyZXNoVGltZVthdHRyaWRdO1xyXG4gICAgbGRmVGFibGVSZWZyZXNoVGltZU9iamVjdFthdHRyaWRdID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBVcGRhdGVSZWZyZXNoSGVhZGVyKGF0dHJpZCwgdGltZW91dENvdW50KTsgd2luZG93W2xkZlRhYmxlUmVmcmVzaENhbGxCYWNrQXJyYXlbYXR0cmlkXV0oKTsgfSwgdGltZW91dENvdW50KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIFVwZGF0ZVJlZnJlc2hIZWFkZXIoYXR0cmlkLCB0aW1lKVxyXG57XHJcbiAgICB2YXIgZHRUaW1lID0gbmV3IERhdGUoKTtcclxuICAgIGR0VGltZS5zZXRTZWNvbmRzKGR0VGltZS5nZXRTZWNvbmRzKCkgKyAodGltZS8xMDAwKSk7XHJcbiAgICB2YXIgaHIgPSAoZHRUaW1lLmdldEhvdXJzKCkgPD0gOSA/IFwiMFwiIDogXCJcIikgKyBkdFRpbWUuZ2V0SG91cnMoKTtcclxuICAgIHZhciBtbiA9IChkdFRpbWUuZ2V0TWludXRlcygpIDw9IDkgPyBcIjBcIiA6IFwiXCIpICsgZHRUaW1lLmdldE1pbnV0ZXMoKTtcclxuICAgIHZhciBzYyA9IChkdFRpbWUuZ2V0U2Vjb25kcygpIDw9IDkgPyBcIjBcIiA6IFwiXCIpICsgZHRUaW1lLmdldFNlY29uZHMoKTtcclxuXHJcblxyXG4gICAgJChcIiNhdXRvUmVmcmVzaFwiICsgYXR0cmlkKS5jaGlsZHJlbignc3BhbicpLmh0bWwoXCJQcsOzeGltYSBhdHVhbGl6YcOnw6NvIFwiICsgaHIgKyBcIjpcIiArIG1uICsgXCI6XCIgKyBzYyk7XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=